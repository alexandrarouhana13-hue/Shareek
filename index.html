<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shareek â€” Your AI Work Companion</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0b;
            --bg-secondary: #141415;
            --bg-tertiary: #1a1a1c;
            --bg-hover: #222224;
            --bg-card: rgba(255, 255, 255, 0.03);
            --border-subtle: rgba(255, 255, 255, 0.06);
            --border-light: rgba(255, 255, 255, 0.1);
            --text-primary: #fafafa;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --text-tertiary: rgba(255, 255, 255, 0.4);
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-purple: #8b5cf6;
            --accent-amber: #f59e0b;
            --accent-rose: #f43f5e;
            --accent-red: #ef4444;
            --gradient-blue: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            --gradient-green: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            --glow-blue: 0 0 60px rgba(59, 130, 246, 0.3);
            --glow-green: 0 0 40px rgba(16, 185, 129, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ambient Background */
        .ambient-bg {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 0;
        }

        .ambient-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.4;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: var(--accent-blue);
            top: -200px;
            right: -200px;
            animation: float1 30s ease-in-out infinite;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: var(--accent-purple);
            bottom: -200px;
            left: -200px;
            animation: float2 25s ease-in-out infinite;
        }

        .orb-3 {
            width: 300px;
            height: 300px;
            background: var(--accent-green);
            top: 40%;
            left: 30%;
            animation: float3 20s ease-in-out infinite;
        }

        @keyframes float1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-50px, 50px) scale(1.1); }
        }

        @keyframes float2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, -30px) scale(0.9); }
        }

        @keyframes float3 {
            0%, 100% { transform: translate(0, 0); opacity: 0.3; }
            50% { transform: translate(-30px, -40px); opacity: 0.5; }
        }

        /* App Container */
        .app {
            position: relative;
            z-index: 1;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Minimal Header */
        .header {
            position: relative;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border-subtle);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
        }

        .logo-mark {
            width: 36px;
            height: 36px;
            background: var(--gradient-blue);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .logo-mark::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
        }

        .logo-mark svg {
            width: 20px;
            height: 20px;
            color: white;
            position: relative;
            z-index: 1;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .cmd-trigger {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.875rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-tertiary);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .cmd-trigger:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
            color: var(--text-secondary);
        }

        .cmd-trigger kbd {
            padding: 0.125rem 0.375rem;
            background: var(--bg-primary);
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.6875rem;
        }

        .notifications-trigger {
            position: relative;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .notifications-trigger:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
        }

        .notifications-trigger svg {
            width: 18px;
            height: 18px;
            color: var(--text-secondary);
        }

        .help-trigger {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .help-trigger:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
        }

        .help-trigger svg {
            width: 18px;
            height: 18px;
            color: var(--text-secondary);
        }

        .notification-badge {
            position: absolute;
            top: -4px;
            right: -4px;
            width: 18px;
            height: 18px;
            background: var(--accent-red);
            border-radius: 50%;
            font-size: 0.625rem;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .notifications-dropdown {
            position: absolute;
            top: 100%;
            right: 60px;
            width: 380px;
            margin-top: 0.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease;
            z-index: 1000;
        }

        .notifications-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .notifications-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .notifications-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .notifications-clear {
            font-size: 0.75rem;
            color: var(--accent-blue);
            background: none;
            border: none;
            cursor: pointer;
        }

        .notifications-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            display: flex;
            gap: 0.75rem;
            padding: 1rem;
            border-bottom: 1px solid var(--border-subtle);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .notification-item:hover {
            background: var(--bg-tertiary);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-item.unread {
            background: rgba(59, 130, 246, 0.05);
        }

        .notification-item.approval {
            background: rgba(16, 185, 129, 0.08);
            border-left: 3px solid var(--accent-green);
        }

        .notification-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .notification-icon svg {
            width: 18px;
            height: 18px;
        }

        .notification-icon.milestone {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .notification-icon.contribution {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .notification-icon.opportunity {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .notification-content {
            flex: 1;
            min-width: 0;
        }

        .notification-text {
            font-size: 0.8125rem;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .notification-desc {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .notification-time {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--gradient-green);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8125rem;
            font-weight: 600;
            cursor: pointer;
        }

        /* Main Content Area */
        .main {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            padding: 1.5rem 2rem 3rem;
        }

        /* Greeting Section */
        .greeting {
            margin-bottom: 1.5rem;
        }

        .greeting-time {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.5rem;
        }

        .greeting-text {
            font-size: 2rem;
            font-weight: 300;
            color: var(--text-primary);
            line-height: 1.3;
        }

        .greeting-text strong {
            font-weight: 600;
            background: var(--gradient-blue);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .greeting-subtitle {
            font-size: 0.9375rem;
            color: var(--text-tertiary);
            margin-top: 0.5rem;
            max-width: 500px;
            line-height: 1.5;
        }

        /* Quick Actions */
        .actions {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .action-card {
            flex: 1;
            min-width: 0;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: visible;
        }

        .action-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.02) 100%);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .action-card:hover {
            border-color: var(--border-light);
            transform: translateY(-2px);
        }

        .action-card:hover::before {
            opacity: 1;
        }

        .action-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.75rem;
        }
        
        .action-icon svg {
            width: 18px;
            height: 18px;
        }

        .action-icon.goals {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .action-icon.skills {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .action-icon.opportunities {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .action-icon.add {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-secondary);
            border: 1px dashed var(--border-light);
        }

        .action-card.add-card {
            border-style: dashed;
        }

        .action-card.add-card:hover .action-icon.add {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
            border-color: var(--accent-blue);
        }

        .action-icon svg {
            width: 20px;
            height: 20px;
        }

        .action-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .action-meta {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
            line-height: 1.3;
        }

        .action-meta span {
            color: var(--accent-green);
        }

        /* Alert Badge on Action Card */
        .action-card.has-alert {
            position: relative;
            border-color: rgba(245, 158, 11, 0.3);
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, var(--bg-card) 100%);
        }

        .action-card.has-alert:hover {
            border-color: rgba(245, 158, 11, 0.5);
        }

        .action-alert {
            position: absolute;
            top: -6px;
            right: -6px;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            background: var(--accent-orange);
            color: white;
            font-size: 0.5625rem;
            font-weight: 600;
            padding: 0.2rem 0.4rem;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(245, 158, 11, 0.4);
            white-space: nowrap;
            z-index: 10;
        }

        .alert-dot {
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .action-icon.milestones {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1));
            color: var(--accent-orange);
        }

        /* Conversation Interface */
        .conversation {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .conversation-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .conversation-label {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-tertiary);
        }

        .conversation-divider {
            flex: 1;
            height: 1px;
            background: var(--border-subtle);
        }

        .messages {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 0.5rem;
            scroll-behavior: smooth;
        }

        .messages::-webkit-scrollbar {
            width: 6px;
        }

        .messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages::-webkit-scrollbar-thumb {
            background: var(--border-subtle);
            border-radius: 3px;
        }

        .messages::-webkit-scrollbar-thumb:hover {
            background: var(--border-light);
        }

        .message {
            display: flex;
            gap: 1rem;
            animation: messageIn 0.3s ease;
        }

        @keyframes messageIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .message-avatar.ai {
            background: var(--gradient-blue);
        }

        .message-avatar.user {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
        }

        .message-avatar svg {
            width: 16px;
            height: 16px;
            color: white;
        }

        .message-content {
            flex: 1;
            min-width: 0;
        }

        .message-sender {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-tertiary);
            margin-bottom: 0.375rem;
        }

        .message-text {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .message-text strong {
            color: var(--text-primary);
            font-weight: 500;
        }

        /* Inline Cards within Messages */
        .inline-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .inline-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .inline-card-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .inline-card-badge {
            font-size: 0.625rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.25rem 0.5rem;
            border-radius: 100px;
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .inline-card-body {
            font-size: 0.8125rem;
            color: var(--text-tertiary);
            line-height: 1.5;
        }

        .inline-card-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .inline-btn {
            padding: 0.5rem 0.875rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }

        .inline-btn.primary {
            background: var(--accent-blue);
            color: white;
        }

        .inline-btn.primary:hover {
            filter: brightness(1.1);
        }

        .inline-btn.secondary {
            background: var(--bg-hover);
            color: var(--text-secondary);
            border: 1px solid var(--border-subtle);
        }

        .inline-btn.secondary:hover {
            background: var(--bg-tertiary);
            border-color: var(--border-light);
        }

        /* Typing Indicator */
        .typing {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.75rem 0;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: var(--text-tertiary);
            border-radius: 50%;
            animation: typingBounce 1.4s ease-in-out infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-4px); }
        }

        /* Chat Input */
        .chat-input-container {
            position: relative;
        }

        .chat-input {
            width: 100%;
            padding: 1rem 1.25rem;
            padding-right: 3.5rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9375rem;
            outline: none;
            transition: all 0.2s ease;
        }

        .chat-input::placeholder {
            color: var(--text-tertiary);
        }

        .chat-input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .chat-send {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--accent-blue);
            border: none;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chat-send:hover {
            filter: brightness(1.1);
            transform: translateY(-50%) scale(1.05);
        }

        .chat-send svg {
            width: 18px;
            height: 18px;
        }

        .chat-quick-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            flex-wrap: wrap;
        }

        .chat-quick-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 20px;
            color: var(--text-secondary);
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chat-quick-btn:hover {
            background: var(--bg-card);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .chat-quick-btn svg {
            width: 12px;
            height: 12px;
        }

        .chat-quick-actions + .conversation-header {
            margin-top: 2rem;
        }

        /* Floating Navigation */
        .floating-nav {
            position: fixed;
            left: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 0.5rem;
            z-index: 500;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
        }

        .floating-nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: transparent;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-tertiary);
        }

        .floating-nav-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .floating-nav-btn.active {
            background: var(--gradient-blue);
            color: white;
        }

        .floating-nav-btn svg {
            width: 18px;
            height: 18px;
        }

        .floating-nav-btn.has-alert-dot {
            position: relative;
        }

        .floating-nav-btn.has-alert-dot::after {
            content: '';
            position: absolute;
            top: 6px;
            right: 6px;
            width: 8px;
            height: 8px;
            background: var(--accent-orange);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .floating-nav-divider {
            height: 1px;
            background: var(--border-subtle);
            margin: 0.25rem 0;
        }

        @media (max-width: 1200px) {
            .floating-nav {
                left: 0.5rem;
                padding: 0.375rem;
            }
            
            .floating-nav-btn {
                width: 36px;
                height: 36px;
            }
        }

        @media (max-width: 768px) {
            .floating-nav {
                left: auto;
                right: 1rem;
                bottom: 1rem;
                top: auto;
                transform: none;
                flex-direction: row;
            }
            
            .floating-nav-divider {
                width: 1px;
                height: auto;
                margin: 0 0.25rem;
            }
        }

        /* Contributions Section */
        .contributions-section {
            margin-top: 2rem;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.25rem;
        }

        .contributions-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .contributions-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .contributions-title svg {
            width: 16px;
            height: 16px;
            color: var(--accent-blue);
        }

        .contributions-auto {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
            background: var(--bg-tertiary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .contributions-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .contribution-item {
            display: flex;
            gap: 0.75rem;
            padding: 0.875rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            transition: all 0.2s ease;
        }

        .contribution-item:hover {
            border-color: var(--border-light);
        }

        .contribution-item.new {
            background: rgba(59, 130, 246, 0.05);
            border-color: rgba(59, 130, 246, 0.2);
        }

        .contribution-status {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            min-width: 60px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .status-dot.new {
            background: var(--accent-blue);
            box-shadow: 0 0 8px rgba(59, 130, 246, 0.5);
            animation: pulse 2s infinite;
        }

        .status-dot.approved {
            background: var(--accent-green);
        }

        .status-label {
            font-size: 0.625rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-tertiary);
        }

        .contribution-content {
            flex: 1;
            min-width: 0;
        }

        .contribution-text {
            font-size: 0.8125rem;
            color: var(--text-primary);
            margin-bottom: 0.375rem;
            line-height: 1.4;
        }

        .contribution-meta {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .contribution-date {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        .contribution-category {
            font-size: 0.6875rem;
            color: var(--accent-purple);
            background: rgba(139, 92, 246, 0.1);
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
        }

        .contribution-skills {
            display: flex;
            gap: 0.375rem;
            flex-wrap: wrap;
        }

        .contribution-skills .skill-tag {
            font-size: 0.625rem;
            padding: 0.125rem 0.375rem;
            background: var(--bg-primary);
            border: 1px solid var(--border-subtle);
            border-radius: 4px;
            color: var(--text-secondary);
        }

        .contribution-actions {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        .contrib-btn {
            padding: 0.375rem 0.625rem;
            border-radius: 6px;
            font-size: 0.6875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .contrib-btn.approve {
            background: var(--accent-green);
            border: none;
            color: white;
        }

        .contrib-btn.approve:hover {
            filter: brightness(1.1);
        }

        .contrib-btn.edit {
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        .contrib-btn.edit:hover {
            border-color: var(--text-tertiary);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Milestone Approval Modal */
        .milestone-modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .milestone-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .milestone-modal-content {
            width: 100%;
            max-width: 480px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            overflow: hidden;
            transform: scale(0.95);
            transition: transform 0.3s ease;
        }

        .milestone-modal.active .milestone-modal-content {
            transform: scale(1);
        }

        .milestone-modal-header {
            text-align: center;
            padding: 2rem 2rem 1.5rem;
            background: linear-gradient(180deg, rgba(16, 185, 129, 0.1) 0%, transparent 100%);
        }

        .milestone-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 1rem;
            background: rgba(16, 185, 129, 0.15);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .milestone-icon svg {
            width: 28px;
            height: 28px;
            color: var(--accent-green);
        }

        .milestone-modal-header h2 {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .milestone-subtitle {
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }

        .milestone-modal-body {
            padding: 0 2rem 1.5rem;
        }

        .milestone-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.25rem;
        }

        .milestone-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .milestone-desc {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .milestone-impact {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .impact-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .impact-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .impact-value {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .impact-value.green {
            color: var(--accent-green);
            font-weight: 500;
        }

        .milestone-modal-actions {
            display: flex;
            gap: 0.75rem;
            padding: 1.5rem 2rem;
            border-top: 1px solid var(--border-subtle);
        }

        .milestone-btn {
            flex: 1;
            padding: 0.75rem;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            transition: all 0.2s ease;
        }

        .milestone-btn.secondary {
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        .milestone-btn.secondary:hover {
            border-color: var(--text-tertiary);
        }

        .milestone-btn.primary {
            background: var(--accent-green);
            border: none;
            color: white;
        }

        .milestone-btn.primary:hover {
            filter: brightness(1.1);
        }

        .milestone-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Onboarding Modal */
        .onboarding-overlay {
            position: fixed;
            inset: 0;
            background: var(--bg-primary);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            overflow-y: auto;
            padding: 2rem;
        }

        .onboarding-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .onboarding-modal {
            width: 100%;
            max-width: 600px;
            padding: 2rem;
            margin: auto;
        }

        .onboarding-skip {
            display: block;
            margin-left: auto;
            margin-bottom: 1rem;
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            color: var(--text-tertiary);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .onboarding-skip:hover {
            background: var(--bg-tertiary);
            border-color: var(--border-light);
            color: var(--text-secondary);
        }

        .onboarding-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .onboarding-logo {
            width: 64px;
            height: 64px;
            margin: 0 auto 1.5rem;
            background: var(--gradient-blue);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--glow-blue);
        }

        .onboarding-logo svg {
            width: 32px;
            height: 32px;
            color: white;
        }

        .onboarding-title {
            font-size: 2rem;
            font-weight: 300;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .onboarding-subtitle {
            font-size: 1.125rem;
            color: var(--text-tertiary);
        }

        .onboarding-features {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }

        .onboarding-feature {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .onboarding-feature:hover {
            border-color: var(--border-light);
            transform: translateX(4px);
        }

        .feature-icon {
            width: 44px;
            height: 44px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .feature-icon svg {
            width: 22px;
            height: 22px;
        }

        .feature-icon.blue {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .feature-icon.green {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .feature-icon.purple {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .feature-icon.amber {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
        }

        .feature-content h3 {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .feature-content p {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .onboarding-footer {
            margin-top: 2.5rem;
            text-align: center;
            padding-bottom: 1rem;
        }

        .onboarding-note {
            font-size: 0.8125rem;
            color: var(--text-tertiary);
            font-style: italic;
            margin-bottom: 1.5rem;
        }

        .onboarding-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem 2.5rem;
            background: var(--gradient-blue);
            border: none;
            border-radius: 12px;
            font-size: 1.125rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--glow-blue);
        }

        .onboarding-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 80px rgba(59, 130, 246, 0.4);
        }

        .onboarding-btn svg {
            width: 20px;
            height: 20px;
        }

        /* Career Assessment Styles */
        .career-assessment {
            margin-top: 0.5rem;
        }

        .assessment-header {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .readiness-score {
            text-align: center;
            flex-shrink: 0;
        }

        .score-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: conic-gradient(
                var(--accent-green) calc(var(--score) * 3.6deg),
                var(--bg-primary) calc(var(--score) * 3.6deg)
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 54px;
            height: 54px;
            background: var(--bg-tertiary);
            border-radius: 50%;
        }

        .score-value {
            position: relative;
            z-index: 1;
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--accent-green);
        }

        .score-label {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
            margin-top: 0.375rem;
            max-width: 80px;
        }

        .assessment-summary {
            flex: 1;
        }

        .assessment-summary p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .assessment-summary .timeframe {
            font-size: 0.8125rem;
            color: var(--text-tertiary);
            margin-bottom: 0;
        }

        .assessment-section {
            margin-bottom: 1rem;
        }

        .assessment-section .section-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
            padding-bottom: 0.375rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .section-header svg {
            width: 14px;
            height: 14px;
        }

        .section-header.strengths {
            color: var(--accent-green);
        }

        .section-header.gaps {
            color: var(--accent-amber);
        }

        .section-header.experience {
            color: var(--accent-blue);
        }

        .strength-list, .gap-list, .experience-list {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        .strength-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.625rem;
            background: rgba(16, 185, 129, 0.05);
            border-radius: 6px;
            font-size: 0.8125rem;
        }

        .strength-name {
            flex: 1;
            color: var(--text-primary);
        }

        .strength-level {
            color: var(--text-tertiary);
            font-size: 0.75rem;
        }

        .strength-trend {
            font-size: 0.6875rem;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .strength-trend.accelerating {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .strength-trend.stable {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .strength-trend.growing {
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-green);
        }

        .gap-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.5rem 0.625rem;
            background: rgba(245, 158, 11, 0.05);
            border-radius: 6px;
            border-left: 3px solid transparent;
        }

        .gap-item.high {
            border-left-color: var(--accent-amber);
            background: rgba(245, 158, 11, 0.08);
        }

        .gap-item.medium {
            border-left-color: var(--accent-blue);
        }

        .gap-info {
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
        }

        .gap-name {
            font-size: 0.8125rem;
            color: var(--text-primary);
        }

        .gap-current {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        .gap-priority {
            font-size: 0.6875rem;
            padding: 0.125rem 0.5rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .gap-item.high .gap-priority {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
        }

        .gap-item.medium .gap-priority {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .experience-item {
            display: flex;
            align-items: flex-start;
            gap: 0.625rem;
            padding: 0.5rem 0;
        }

        .experience-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-top: 0.25rem;
            flex-shrink: 0;
        }

        .experience-status.strong {
            background: var(--accent-green);
        }

        .experience-status.moderate {
            background: var(--accent-amber);
        }

        .experience-status.gap {
            background: var(--accent-red);
        }

        .experience-info {
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
        }

        .experience-name {
            font-size: 0.8125rem;
            color: var(--text-primary);
        }

        .experience-desc {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        /* Recommendation List in Card */
        .recommendation-list {
            display: flex;
            flex-direction: column;
            gap: 0.625rem;
        }

        .recommendation-item {
            padding: 0.625rem;
            background: var(--bg-primary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }

        .recommendation-item:hover {
            border-color: var(--border-light);
            transform: translateX(4px);
        }

        .rec-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.25rem;
        }

        .rec-title {
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .rec-impact {
            font-size: 0.625rem;
            padding: 0.125rem 0.375rem;
            border-radius: 4px;
            font-weight: 500;
        }

        .rec-impact.high {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .rec-impact.medium {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .rec-desc {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-bottom: 0.375rem;
        }

        .rec-skills {
            display: flex;
            gap: 0.25rem;
            flex-wrap: wrap;
        }

        .rec-skill {
            font-size: 0.625rem;
            padding: 0.125rem 0.375rem;
            background: var(--bg-tertiary);
            border-radius: 4px;
            color: var(--text-secondary);
        }

        /* Command Palette Overlay */
        .cmd-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            display: none;
            align-items: flex-start;
            justify-content: center;
            padding-top: 15vh;
        }

        .cmd-overlay.active {
            display: flex;
            animation: fadeIn 0.15s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .cmd-palette {
            width: 100%;
            max-width: 600px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            animation: cmdIn 0.2s ease;
        }

        @keyframes cmdIn {
            from { opacity: 0; transform: scale(0.95) translateY(-10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        .cmd-input-wrapper {
            padding: 1rem;
            border-bottom: 1px solid var(--border-subtle);
        }

        .cmd-input {
            width: 100%;
            padding: 0.75rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1.125rem;
            outline: none;
        }

        .cmd-input::placeholder {
            color: var(--text-tertiary);
        }

        .cmd-results {
            max-height: 400px;
            overflow-y: auto;
        }

        .cmd-group {
            padding: 0.5rem;
        }

        .cmd-group-label {
            padding: 0.5rem 0.75rem;
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-tertiary);
        }

        .cmd-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.15s ease;
        }

        .cmd-item:hover, .cmd-item.selected {
            background: var(--bg-hover);
        }

        .cmd-item-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cmd-item-icon.blue {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .cmd-item-icon.green {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .cmd-item-icon.purple {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .cmd-item-icon.amber {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
        }

        .cmd-item-icon svg {
            width: 16px;
            height: 16px;
        }

        .cmd-item-content {
            flex: 1;
        }

        .cmd-item-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .cmd-item-desc {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .cmd-item-shortcut {
            display: flex;
            gap: 0.25rem;
        }

        .cmd-item-shortcut kbd {
            padding: 0.25rem 0.5rem;
            background: var(--bg-primary);
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        /* Detail Panel (slides in) */
        .detail-panel {
            position: fixed;
            top: 0;
            right: 0;
            bottom: 0;
            width: 480px;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-subtle);
            z-index: 500;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .detail-panel.active {
            transform: translateX(0);
        }

        .detail-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .detail-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-close:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .detail-close svg {
            width: 18px;
            height: 18px;
        }

        .detail-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .detail-body {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
        }

        .detail-section {
            margin-bottom: 2rem;
        }

        .detail-section-title {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-tertiary);
            margin-bottom: 1rem;
        }

        .detail-stat {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .detail-stat:last-child {
            border-bottom: none;
        }

        .detail-stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .detail-stat-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .detail-stat-value.green { color: var(--accent-green); }
        .detail-stat-value.blue { color: var(--accent-blue); }
        .detail-stat-value.amber { color: var(--accent-amber); }

        .detail-progress {
            margin-bottom: 1rem;
        }

        .detail-progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .detail-progress-label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .detail-progress-value {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--accent-green);
        }

        .detail-progress-bar {
            height: 4px;
            background: var(--bg-tertiary);
            border-radius: 2px;
            overflow: hidden;
        }

        .detail-progress-fill {
            height: 100%;
            background: var(--gradient-green);
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        /* Detail Panel - Skills */
        .detail-skills {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .detail-skill-tag {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.625rem 0.875rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-skill-tag:hover {
            background: var(--bg-card);
            border-color: var(--accent-blue);
        }

        .detail-skill-tag.gap {
            border-color: rgba(245, 158, 11, 0.3);
            background: rgba(245, 158, 11, 0.05);
        }

        .detail-skill-tag.gap:hover {
            border-color: var(--accent-amber);
        }

        .skill-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .skill-status.advancing {
            background: var(--accent-green);
            box-shadow: 0 0 8px rgba(16, 185, 129, 0.5);
        }

        .skill-status.stable {
            background: var(--accent-blue);
        }

        .skill-status.gap {
            background: var(--accent-amber);
        }

        .skill-level {
            margin-left: auto;
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        /* Detail Panel - Action Cards */
        .detail-action-cards {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .detail-action-card {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-action-card:hover {
            background: var(--bg-card);
            border-color: var(--border-light);
            transform: translateX(4px);
        }

        .detail-action-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .detail-action-icon svg {
            width: 18px;
            height: 18px;
        }

        .detail-action-icon.opportunity {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .detail-action-icon.contribution {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .detail-action-icon.rotation {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .detail-action-content {
            flex: 1;
            min-width: 0;
        }

        .detail-action-title {
            display: block;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.125rem;
        }

        .detail-action-desc {
            display: block;
            font-size: 0.75rem;
            color: var(--text-tertiary);
            line-height: 1.4;
        }

        .detail-action-badge {
            padding: 0.25rem 0.5rem;
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
            font-size: 0.6875rem;
            font-weight: 500;
            border-radius: 4px;
            flex-shrink: 0;
        }

        .detail-action-badge.match {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        /* Detail Panel - Gap Card */
        .detail-gap-card {
            padding: 1rem;
            background: rgba(245, 158, 11, 0.05);
            border: 1px solid rgba(245, 158, 11, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-gap-card:hover {
            background: rgba(245, 158, 11, 0.08);
            border-color: rgba(245, 158, 11, 0.3);
        }

        .detail-gap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .detail-gap-skill {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--accent-amber);
        }

        .detail-gap-level {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .detail-gap-desc {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 0.75rem;
        }

        .detail-gap-actions {
            display: flex;
            gap: 0.5rem;
        }

        .detail-gap-btn {
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-gap-btn.primary {
            background: var(--accent-amber);
            border: none;
            color: #000;
            font-weight: 500;
        }

        .detail-gap-btn.primary:hover {
            filter: brightness(1.1);
        }

        .detail-gap-btn:not(.primary) {
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        .detail-gap-btn:not(.primary):hover {
            border-color: var(--text-tertiary);
            color: var(--text-primary);
        }

        /* Detail Panel - Linked Goals */
        .detail-linked-goals {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .detail-linked-goal {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .detail-linked-goal:hover {
            background: var(--bg-card);
            border-color: var(--border-light);
        }

        .linked-goal-progress {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: conic-gradient(
                var(--accent-green) calc(var(--progress) * 3.6deg),
                var(--bg-primary) calc(var(--progress) * 3.6deg)
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            flex-shrink: 0;
        }

        .linked-goal-progress::after {
            content: '';
            position: absolute;
            width: 28px;
            height: 28px;
            background: var(--bg-tertiary);
            border-radius: 50%;
        }

        .linked-goal-content {
            flex: 1;
            min-width: 0;
        }

        .linked-goal-title {
            display: block;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: 0.125rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .linked-goal-status {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .linked-goal-arrow {
            width: 16px;
            height: 16px;
            color: var(--text-tertiary);
            flex-shrink: 0;
        }

        /* Detail Panel - Evidence List */
        .detail-evidence-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .detail-evidence-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-subtle);
        }

        .detail-evidence-item:last-child {
            border-bottom: none;
        }

        .evidence-date {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            min-width: 50px;
            flex-shrink: 0;
        }

        .evidence-text {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.25rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 2000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .toast.active,
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .toast-icon svg {
            width: 16px;
            height: 16px;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.125rem;
        }

        .toast-text {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .toast-action {
            padding: 0.375rem 0.75rem;
            background: var(--accent-blue);
            border: none;
            border-radius: 6px;
            color: white;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: filter 0.2s ease;
        }

        .toast-action:hover {
            filter: brightness(1.1);
        }

        /* Milestone Popup */
        .milestone-popup {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 380px;
            max-width: calc(100vw - 2rem);
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            z-index: 2500;
            transform: translateY(120%) scale(0.95);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
        }

        .milestone-popup.active {
            transform: translateY(0) scale(1);
            opacity: 1;
            pointer-events: auto;
        }

        .milestone-popup-content {
            padding: 1.25rem;
        }

        .milestone-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .milestone-popup-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(16, 185, 129, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            animation: popupIconPulse 2s infinite;
        }

        .milestone-popup-icon svg {
            width: 22px;
            height: 22px;
            color: var(--accent-green);
        }

        @keyframes popupIconPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
        }

        .milestone-popup-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-popup-close:hover {
            background: var(--bg-hover);
        }

        .milestone-popup-close svg {
            width: 16px;
            height: 16px;
            color: var(--text-tertiary);
        }

        .milestone-popup-body {
            margin-bottom: 1.25rem;
        }

        .milestone-popup-label {
            display: inline-block;
            font-size: 0.625rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--accent-green);
            background: rgba(16, 185, 129, 0.15);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-bottom: 0.75rem;
        }

        .milestone-popup-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
            margin-bottom: 0.5rem;
        }

        .milestone-popup-desc {
            font-size: 0.8125rem;
            color: var(--text-tertiary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .milestone-popup-links {
            display: flex;
            flex-direction: column;
            gap: 0.625rem;
        }

        .milestone-popup-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .milestone-popup-link .link-label {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
            min-width: 100px;
        }

        .milestone-popup-link .link-value {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .milestone-popup-link .link-value svg {
            width: 12px;
            height: 12px;
        }

        .milestone-popup-link .link-value.goal {
            background: rgba(139, 92, 246, 0.1);
            color: var(--accent-purple);
        }

        .milestone-popup-link .link-value.skill {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
        }

        .milestone-popup-actions {
            display: flex;
            gap: 0.75rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-subtle);
        }

        .milestone-popup-approve {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--accent-green);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 0.8125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-popup-approve:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .milestone-popup-approve svg {
            width: 16px;
            height: 16px;
        }

        .milestone-popup-review {
            padding: 0.75rem 1rem;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-popup-review:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        /* Milestone Linkage Visualization */
        .milestone-linkage {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
        }

        .linkage-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .linkage-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .linkage-icon svg {
            width: 18px;
            height: 18px;
        }

        .linkage-icon.goal {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .linkage-icon.skill {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .linkage-content {
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
        }

        .linkage-label {
            font-size: 0.625rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .linkage-value {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .linkage-impact {
            font-size: 0.75rem;
            color: var(--accent-green);
            font-weight: 500;
        }

        .linkage-connector {
            width: 2px;
            height: 20px;
            background: linear-gradient(to bottom, var(--accent-purple), var(--accent-blue));
            margin: 0.5rem 0 0.5rem 17px;
            border-radius: 1px;
        }

        /* Skill Level Popup */
        .skill-popup {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 380px;
            max-width: calc(100vw - 2rem);
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            z-index: 2500;
            transform: translateY(120%) scale(0.95);
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            pointer-events: none;
        }

        .skill-popup.active {
            transform: translateY(0) scale(1);
            opacity: 1;
            pointer-events: auto;
        }

        .skill-popup-content {
            padding: 1.25rem;
        }

        .skill-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .skill-popup-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            animation: popupIconPulse 2s infinite;
        }

        .skill-popup-icon svg {
            width: 22px;
            height: 22px;
            color: var(--accent-purple);
        }

        .skill-popup-close {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .skill-popup-close:hover {
            background: var(--bg-hover);
        }

        .skill-popup-close svg {
            width: 16px;
            height: 16px;
            color: var(--text-tertiary);
        }

        .skill-popup-body {
            margin-bottom: 1.25rem;
        }

        .skill-popup-label {
            display: inline-block;
            font-size: 0.625rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--accent-purple);
            background: rgba(139, 92, 246, 0.15);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-bottom: 0.75rem;
        }

        .skill-popup-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
            margin-bottom: 0.5rem;
        }

        .skill-popup-desc {
            font-size: 0.8125rem;
            color: var(--text-tertiary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .skill-level-change {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: 12px;
            margin-bottom: 1rem;
        }

        .level-from,
        .level-to {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.375rem;
        }

        .level-badge {
            padding: 0.375rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        .level-badge.suggested {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
            border-color: var(--accent-purple);
            color: var(--accent-purple);
            animation: suggestedPulse 2s infinite;
        }

        @keyframes suggestedPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.4); }
            50% { box-shadow: 0 0 0 6px rgba(139, 92, 246, 0); }
        }

        .level-text {
            font-size: 0.625rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .level-arrow {
            color: var(--accent-green);
        }

        .level-arrow svg {
            width: 20px;
            height: 20px;
        }

        .skill-evidence {
            padding: 0.75rem;
            background: var(--bg-tertiary);
            border-radius: 8px;
        }

        .evidence-title {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: block;
            margin-bottom: 0.5rem;
        }

        .evidence-list {
            margin: 0;
            padding-left: 1rem;
            font-size: 0.75rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .evidence-list li {
            margin-bottom: 0.25rem;
        }

        .skill-popup-actions {
            display: flex;
            gap: 0.75rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-subtle);
        }

        .skill-popup-approve {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            background: var(--accent-purple);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 0.8125rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .skill-popup-approve:hover {
            filter: brightness(1.1);
            transform: translateY(-1px);
        }

        .skill-popup-approve svg {
            width: 16px;
            height: 16px;
        }

        .skill-popup-review {
            padding: 0.75rem 1rem;
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            font-size: 0.8125rem;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .skill-popup-review:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        /* Skill Tags */
        .skill-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.625rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 6px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .skill-tag:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
        }

        .skill-tag .level {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .skill-tag .level.advanced { background: var(--accent-green); }
        .skill-tag .level.consistent { background: var(--accent-blue); }
        .skill-tag .level.emerging { background: var(--accent-amber); }

        /* See More Link */
        .see-more-link {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem;
            margin-top: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .see-more-link:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        .see-more-link svg {
            width: 16px;
            height: 16px;
        }

        /* Milestone Detail Cards (Side Panel) */
        .detail-intro {
            font-size: 0.8125rem;
            color: var(--text-tertiary);
            line-height: 1.5;
        }

        .milestone-detail-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 10px;
            padding: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-detail-card:hover {
            border-color: var(--border-light);
            transform: translateX(4px);
        }

        .milestone-detail-card.pending {
            background: rgba(245, 158, 11, 0.05);
            border-color: rgba(245, 158, 11, 0.2);
        }

        .milestone-detail-card.pending:hover {
            border-color: rgba(245, 158, 11, 0.4);
        }

        .milestone-detail-status {
            display: flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.625rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .milestone-detail-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .milestone-detail-dot.pending {
            background: var(--accent-orange);
            box-shadow: 0 0 6px rgba(245, 158, 11, 0.5);
            animation: pulse 2s infinite;
        }

        .milestone-detail-dot.approved {
            background: var(--accent-blue);
        }

        .milestone-detail-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
            margin-bottom: 0.5rem;
        }

        .milestone-detail-meta {
            margin-bottom: 0.625rem;
        }

        .milestone-detail-date {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        .milestone-detail-links {
            display: flex;
            flex-wrap: wrap;
            gap: 0.375rem;
        }

        .milestone-link-tag {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.6875rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .milestone-link-tag svg {
            width: 10px;
            height: 10px;
        }

        .milestone-link-tag.goal {
            background: rgba(139, 92, 246, 0.1);
            color: var(--accent-purple);
        }

        .milestone-link-tag.skill {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
        }

        .milestone-detail-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-subtle);
        }

        .milestone-detail-approve,
        .milestone-detail-edit {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-detail-approve {
            flex: 1;
            justify-content: center;
            background: var(--accent-green);
            color: white;
            border: none;
        }

        .milestone-detail-approve:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .milestone-detail-approve svg,
        .milestone-detail-edit svg {
            width: 14px;
            height: 14px;
        }

        .milestone-detail-edit {
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        .milestone-detail-edit:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        /* Full Page Views */
        .full-view {
            position: fixed;
            inset: 0;
            background: var(--bg-primary);
            z-index: 400;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .full-view.active {
            display: flex;
            animation: viewIn 0.3s ease;
        }

        @keyframes viewIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes goalAdded {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .full-view-header {
            padding: 1rem 2rem;
            border-bottom: 1px solid var(--border-subtle);
            display: flex;
            align-items: center;
            gap: 1rem;
            background: var(--bg-secondary);
        }

        .full-view-back {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .full-view-back:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .full-view-back svg {
            width: 18px;
            height: 18px;
        }

        .full-view-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .full-view-body {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
        }

        .full-view-content {
            max-width: 900px;
            margin: 0 auto;
        }

        /* View Stats Row */
        .view-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .view-stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.25rem;
            text-align: center;
        }

        .view-stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .view-stat-value.green { color: var(--accent-green); }
        .view-stat-value.blue { color: var(--accent-blue); }
        .view-stat-value.amber { color: var(--accent-amber); }

        .view-stat-label {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        /* Ask Shareek Chat Entry */
        .ask-shareek {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .ask-shareek:hover {
            background: var(--bg-tertiary);
            border-color: var(--border-light);
        }

        .ask-shareek-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: var(--gradient-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .ask-shareek-icon svg {
            width: 18px;
            height: 18px;
            color: white;
        }

        .ask-shareek-content {
            flex: 1;
        }

        .ask-shareek-placeholder {
            font-size: 0.875rem;
            color: var(--text-tertiary);
        }

        .ask-shareek-suggestion {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-top: 0.25rem;
            opacity: 0.7;
        }

        .ask-shareek-shortcut {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .ask-shareek-shortcut kbd {
            padding: 0.25rem 0.5rem;
            background: var(--bg-primary);
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.6875rem;
            color: var(--text-tertiary);
        }

        .ask-shareek-container {
            margin-bottom: 2rem;
        }

        /* Search Bar Style for Full Views */
        .section-search-bar {
            position: relative;
            margin-bottom: 1rem;
        }

        .section-search-input {
            width: 100%;
            padding: 0.875rem 1rem;
            padding-left: 2.75rem;
            padding-right: 4rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.875rem;
            outline: none;
            transition: all 0.2s ease;
        }

        .section-search-input::placeholder {
            color: var(--text-tertiary);
        }

        .section-search-input:focus {
            border-color: var(--accent-blue);
            background: var(--bg-secondary);
        }

        .section-search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            color: var(--text-tertiary);
            pointer-events: none;
        }

        .section-search-shortcut {
            position: absolute;
            right: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 0.25rem;
        }

        .section-search-shortcut kbd {
            padding: 0.25rem 0.375rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 4px;
            font-family: inherit;
            font-size: 0.625rem;
            color: var(--text-tertiary);
        }

        .ask-shareek-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.875rem;
            background: transparent;
            border: 1px dashed var(--border-subtle);
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.8125rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .quick-action-btn:hover {
            background: var(--bg-card);
            border-color: var(--accent-blue);
            color: var(--accent-blue);
        }

        .quick-action-btn svg {
            width: 14px;
            height: 14px;
        }

        /* Section Title */
        .section-title {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--text-tertiary);
            margin-bottom: 1rem;
        }

        /* Goal Card Full */
        .goal-card-full {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .goal-card-full:hover {
            border-color: var(--border-light);
        }

        .goal-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .goal-card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .goal-card-status {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        .goal-card-badge {
            padding: 0.375rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .goal-card-badge.on-track {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .goal-card-badge.in-progress {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .goal-card-badge.at-risk {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
        }

        .goal-progress-bar {
            height: 4px;
            background: var(--bg-tertiary);
            border-radius: 2px;
            margin-bottom: 1rem;
            overflow: hidden;
        }

        .goal-progress-fill {
            height: 100%;
            border-radius: 2px;
            transition: width 0.5s ease;
        }

        .goal-progress-fill.green { background: var(--accent-green); }
        .goal-progress-fill.blue { background: var(--accent-blue); }
        .goal-progress-fill.amber { background: var(--accent-amber); }

        .goal-key-results {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .key-result {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.625rem 0.875rem;
            background: var(--bg-tertiary);
            border-radius: 8px;
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .key-result-status {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .key-result-status.complete {
            background: var(--accent-green);
            color: white;
        }

        .key-result-status.in-progress {
            background: var(--bg-hover);
            border: 2px solid var(--accent-blue);
        }

        .key-result-status svg {
            width: 12px;
            height: 12px;
        }

        .key-result-text {
            flex: 1;
        }

        .key-result-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Skill Category */
        .skill-category {
            margin-bottom: 2rem;
        }

        .skill-category-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .skill-category-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .skill-category-icon.leadership {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .skill-category-icon.communication {
            background: rgba(139, 92, 246, 0.15);
            color: var(--accent-purple);
        }

        .skill-category-icon.analytical {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .skill-category-icon svg {
            width: 16px;
            height: 16px;
        }

        .skill-category-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .skill-card-full {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .skill-card-full:hover {
            border-color: var(--border-light);
        }

        .skill-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .skill-card-name {
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .skill-card-level {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .skill-card-level.advanced {
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .skill-card-level.consistent {
            background: rgba(59, 130, 246, 0.15);
            color: var(--accent-blue);
        }

        .skill-card-level.emerging {
            background: rgba(245, 158, 11, 0.15);
            color: var(--accent-amber);
        }

        .skill-card-evidence {
            font-size: 0.75rem;
            color: var(--text-tertiary);
        }

        /* Opportunity Card Full */
        .opportunity-card-full {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .opportunity-card-full:hover {
            border-color: var(--border-light);
        }

        .opportunity-card-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 0.75rem;
        }

        .opportunity-card-type {
            font-size: 0.6875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--accent-purple);
            margin-bottom: 0.375rem;
        }

        .opportunity-card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .opportunity-card-match {
            padding: 0.375rem 0.75rem;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
            background: rgba(16, 185, 129, 0.15);
            color: var(--accent-green);
        }

        .opportunity-card-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
            font-size: 0.8125rem;
            color: var(--text-tertiary);
        }

        .opportunity-card-meta span {
            display: flex;
            align-items: center;
            gap: 0.375rem;
        }

        .opportunity-card-meta svg {
            width: 14px;
            height: 14px;
        }

        .opportunity-card-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .opportunity-skill-tag {
            padding: 0.375rem 0.625rem;
            background: var(--bg-tertiary);
            border-radius: 6px;
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .opportunity-skill-tag.match {
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        /* Filters */
        .filters-row {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-subtle);
            border-radius: 100px;
            font-size: 0.8125rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn:hover {
            background: var(--bg-hover);
            border-color: var(--border-light);
        }

        .filter-btn.active {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: white;
        }

        .filter-btn.pending-filter {
            position: relative;
        }

        .filter-btn.pending-filter::after {
            content: '';
            position: absolute;
            top: -4px;
            right: -4px;
            width: 8px;
            height: 8px;
            background: var(--accent-orange);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        /* Milestone Full View Styles */
        .pending-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .pending-indicator {
            width: 8px;
            height: 8px;
            background: var(--accent-orange);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .milestone-card-full {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-card-full:hover {
            border-color: var(--border-light);
            transform: translateX(4px);
        }

        .milestone-card-full.pending {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.05) 0%, var(--bg-card) 100%);
            border-color: rgba(245, 158, 11, 0.3);
        }

        .milestone-card-full.pending:hover {
            border-color: rgba(245, 158, 11, 0.5);
        }

        .milestone-card-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .milestone-status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .milestone-status-dot.pending {
            background: var(--accent-orange);
            box-shadow: 0 0 8px rgba(245, 158, 11, 0.5);
            animation: pulse 2s infinite;
        }

        .milestone-status-dot.approved {
            background: var(--accent-blue);
        }

        .milestone-status-text {
            font-size: 0.6875rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .milestone-card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .milestone-card-date {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            margin-bottom: 1rem;
        }

        .milestone-card-links {
            display: flex;
            gap: 2rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .milestone-link-group {
            display: flex;
            flex-direction: column;
            gap: 0.375rem;
        }

        .milestone-link-label {
            font-size: 0.625rem;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .milestone-link-value {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            font-size: 0.8125rem;
            padding: 0.375rem 0.625rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-link-value svg {
            width: 12px;
            height: 12px;
        }

        .milestone-link-value.goal {
            background: rgba(139, 92, 246, 0.1);
            color: var(--accent-purple);
        }

        .milestone-link-value.goal:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .milestone-link-value.skill {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue);
        }

        .milestone-link-value.skill:hover {
            background: rgba(59, 130, 246, 0.2);
        }

        .milestone-card-actions {
            display: flex;
            gap: 0.75rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-subtle);
        }

        .milestone-approve-btn,
        .milestone-edit-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.8125rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .milestone-approve-btn {
            background: var(--accent-green);
            color: white;
            border: none;
        }

        .milestone-approve-btn:hover {
            background: #059669;
            transform: translateY(-1px);
        }

        .milestone-approve-btn svg,
        .milestone-edit-btn svg {
            width: 14px;
            height: 14px;
        }

        .milestone-edit-btn {
            background: transparent;
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }

        .milestone-edit-btn:hover {
            border-color: var(--border-light);
            color: var(--text-primary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }

            .main {
                padding: 2rem 1rem;
            }

            .greeting-text {
                font-size: 1.5rem;
            }

            .actions {
                flex-wrap: wrap;
            }
            
            .action-card {
                flex: 1 1 45%;
                min-width: 140px;
            }

            .detail-panel {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Ambient Background -->
    <div class="ambient-bg">
        <div class="ambient-orb orb-1"></div>
        <div class="ambient-orb orb-2"></div>
        <div class="ambient-orb orb-3"></div>
    </div>

    <div class="app">
        <!-- Minimal Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-mark">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 3C8 3 5 5.5 5 8.5c0 2 1.5 3.5 3.5 4.5 2.5 1.2 4 2 4 3.5 0 1.5-1.5 2.5-3.5 2.5"/>
                        <path d="M12 21c4 0 7-2.5 7-5.5 0-2-1.5-3.5-3.5-4.5-2.5-1.2-4-2-4-3.5 0-1.5 1.5-2.5 3.5-2.5"/>
                    </svg>
                </div>
            </div>
                <div class="header-right">
                    <div class="notifications-trigger" onclick="toggleNotifications()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                        </svg>
                        <span class="notification-badge">3</span>
                    </div>
                    <button class="help-trigger" onclick="showOnboarding()" title="About Shareek">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </button>
                    <div class="user-avatar">AR</div>
                </div>
                
                <!-- Notifications Dropdown -->
                <div class="notifications-dropdown" id="notifications-dropdown">
                    <div class="notifications-header">
                        <span class="notifications-title">Notifications</span>
                        <button class="notifications-clear">Mark all read</button>
                    </div>
                    <div class="notifications-list">
                        <div class="notification-item unread approval" onclick="showMilestoneApproval()">
                            <div class="notification-icon milestone">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                    <path d="M22 4L12 14.01l-3-3"/>
                                </svg>
                            </div>
                            <div class="notification-content">
                                <p class="notification-text"><strong>New milestone detected</strong></p>
                                <p class="notification-desc">AI Assistant MVP launched â€” awaiting your approval</p>
                                <p class="notification-time">2 minutes ago</p>
                            </div>
                        </div>
                        <div class="notification-item unread">
                            <div class="notification-icon contribution">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <path d="M14 2v6h6"/>
                                </svg>
                            </div>
                            <div class="notification-content">
                                <p class="notification-text">New contribution captured</p>
                                <p class="notification-desc">Led product strategy workshop with 3 entities</p>
                                <p class="notification-time">1 hour ago</p>
                            </div>
                        </div>
                        <div class="notification-item">
                            <div class="notification-icon opportunity">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                </svg>
                            </div>
                            <div class="notification-content">
                                <p class="notification-text">New opportunity match</p>
                                <p class="notification-desc">Head of AI Products â€” 95% match</p>
                                <p class="notification-time">Yesterday</p>
                            </div>
                        </div>
                    </div>
                </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Greeting -->
            <div class="greeting">
                <p class="greeting-time">Tuesday, January 27</p>
                <h1 class="greeting-text">Good morning, <strong>Alexandra</strong></h1>
                <p class="greeting-subtitle">Your AI-powered career companion â€” tracking your growth, surfacing opportunities, and helping you reach your goals.</p>
            </div>

            <!-- Quick Actions -->
            <div class="actions">
                <div class="action-card" onclick="openDetail('goals')">
                    <div class="action-icon goals">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <path d="M22 4L12 14.01l-3-3"/>
                        </svg>
                    </div>
                    <div class="action-title">Goals</div>
                    <div class="action-meta"><span>2</span> of 3 on track</div>
                </div>
                <div class="action-card" onclick="openDetail('skills')">
                    <div class="action-icon skills">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                            <path d="M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="action-title">Skills</div>
                    <div class="action-meta"><span>1</span> advancing this month</div>
                </div>
                <div class="action-card" onclick="openDetail('opportunities')">
                    <div class="action-icon opportunities">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                    </div>
                    <div class="action-title">Opportunities</div>
                    <div class="action-meta"><span>4</span> high matches</div>
                </div>
                <div class="action-card" onclick="openDetail('milestones')">
                    <div class="action-icon milestones">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <path d="M22 4L12 14.01l-3-3"/>
                        </svg>
                    </div>
                    <div class="action-title">Milestones</div>
                    <div class="action-meta"><span>3</span> identified this month</div>
                </div>
            </div>

            <!-- Conversation Interface -->
            <div class="conversation">
                <div class="chat-input-container">
                    <input type="text" class="chat-input" placeholder="Ask Shareek anything..." />
                    <button class="chat-send">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13"/>
                            <path d="M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                </div>
                <div class="chat-quick-actions">
                    <button class="chat-quick-btn" onclick="startGoalCreation()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 8v8"/>
                            <path d="M8 12h8"/>
                        </svg>
                        Add goal
                    </button>
                    <button class="chat-quick-btn" onclick="startContributionLogging()">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <path d="M14 2v6h6"/>
                            <path d="M12 18v-6"/>
                            <path d="M9 15h6"/>
                        </svg>
                        Log contribution
                    </button>
                    <button class="chat-quick-btn" onclick="sendMessage('Am I on a good trajectory to become a Director?')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 6l-9.5 9.5-5-5L1 18"/>
                            <path d="M17 6h6v6"/>
                        </svg>
                        Career path
                    </button>
                    <button class="chat-quick-btn" onclick="sendMessage('What should I focus on this week?')">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        Weekly focus
                    </button>
                </div>
                <div class="conversation-header">
                    <span class="conversation-label">Recent conversation</span>
                    <div class="conversation-divider"></div>
                </div>
                <div class="messages">
                    <div class="message">
                        <div class="message-avatar user">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                                <circle cx="12" cy="7" r="4"/>
                            </svg>
                        </div>
                        <div class="message-content">
                            <p class="message-sender">You</p>
                            <p class="message-text">What should I focus on this week to advance my goals?</p>
                        </div>
                    </div>
                    <div class="message">
                        <div class="message-avatar ai">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                <path d="M2 17l10 5 10-5"/>
                            </svg>
                        </div>
                        <div class="message-content">
                            <p class="message-sender">Shareek</p>
                            <p class="message-text">
                                Based on your current progress, I'd suggest focusing on <strong>stakeholder engagement</strong> this week. 
                                Your cross-entity goal needs one more recognition signal â€” the <strong>AI Summit on Thursday</strong> 
                                could be a good opportunity to present your framework.
                            </p>
                            <div class="inline-card">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">Government AI Summit 2026</span>
                                    <span class="inline-card-badge">Recommended</span>
                                </div>
                                <div class="inline-card-body">
                                    Thursday, Jan 30 Â· Ministry of Cabinet Affairs Â· Presenting would strengthen your Executive Communication skill and advance your cross-entity goal.
                                </div>
                                <div class="inline-card-actions">
                                    <button class="inline-btn primary">Register to present</button>
                                    <button class="inline-btn secondary">Tell me more</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>

    <!-- Floating Navigation -->
    <nav class="floating-nav">
        <button class="floating-nav-btn active" onclick="scrollToSection('top')" title="Home">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                <path d="M9 22V12h6v10"/>
            </svg>
        </button>
        <button class="floating-nav-btn" onclick="openFullView('goals')" title="Goals">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <path d="M22 4L12 14.01l-3-3"/>
            </svg>
        </button>
        <button class="floating-nav-btn" onclick="openFullView('skills')" title="Skills">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                <path d="M2 17l10 5 10-5"/>
            </svg>
        </button>
        <button class="floating-nav-btn" onclick="openFullView('opportunities')" title="Opportunities">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
        </button>
        <button class="floating-nav-btn" onclick="openFullView('milestones')" title="Milestones" id="floating-milestones-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <path d="M22 4L12 14.01l-3-3"/>
            </svg>
        </button>
        <div class="floating-nav-divider"></div>
        <button class="floating-nav-btn" onclick="toggleCommandPalette()" title="Ask Shareek">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
        </button>
    </nav>

    <!-- Milestone Approval Modal -->
    <div class="milestone-modal" id="milestone-modal">
        <div class="milestone-modal-content">
            <div class="milestone-modal-header">
                <div class="milestone-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <path d="M22 4L12 14.01l-3-3"/>
                    </svg>
                </div>
                <h2>Milestone Detected</h2>
                <p class="milestone-subtitle">Shareek identified a significant achievement in your work</p>
            </div>
            <div class="milestone-modal-body">
                <div class="milestone-card">
                    <h3 class="milestone-title">AI Assistant MVP Successfully Launched</h3>
                    <p class="milestone-desc">Based on your recent activities, you've completed the MVP launch for GovAI's flagship AI assistant, achieving 91% user satisfaction across 3 pilot entities.</p>
                    <div class="milestone-impact">
                        <div class="impact-item">
                            <span class="impact-label">Goal Impact</span>
                            <span class="impact-value green">Completes Key Result</span>
                        </div>
                        <div class="impact-item">
                            <span class="impact-label">Skills Strengthened</span>
                            <span class="impact-value">Product Launch, AI Product Strategy</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="milestone-modal-actions">
                <button class="milestone-btn secondary" onclick="closeMilestoneModal()">Not accurate</button>
                <button class="milestone-btn primary" onclick="approveMilestone()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 6L9 17l-5-5"/>
                    </svg>
                    Approve milestone
                </button>
            </div>
        </div>
    </div>

    <!-- Onboarding Modal -->
    <div class="onboarding-overlay" id="onboarding-overlay">
        <div class="onboarding-modal">
            <button class="onboarding-skip" onclick="closeOnboarding()">Skip intro â†’</button>
            <div class="onboarding-header">
                <div class="onboarding-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>
                </div>
                <h1 class="onboarding-title">Welcome to Shareek</h1>
                <p class="onboarding-subtitle">Your AI-powered career companion</p>
            </div>
            <div class="onboarding-content">
                <div class="onboarding-features">
                    <div class="onboarding-feature">
                        <div class="feature-icon blue">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 6v6l4 2"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Automatic Work Milestones</h3>
                            <p>Shareek observes your work and automatically captures milestones â€” no manual logging required.</p>
                        </div>
                    </div>
                    <div class="onboarding-feature">
                        <div class="feature-icon green">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                <path d="M2 17l10 5 10-5"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Skills Inferred, Not Claimed</h3>
                            <p>Your skills profile builds from evidence in your actual work, creating a living talent profile.</p>
                        </div>
                    </div>
                    <div class="onboarding-feature">
                        <div class="feature-icon purple">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Goal-Aligned Opportunities</h3>
                            <p>Get matched to rotations, projects, and roles that advance your goals and leverage your strengths.</p>
                        </div>
                    </div>
                    <div class="onboarding-feature">
                        <div class="feature-icon amber">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                        </div>
                        <div class="feature-content">
                            <h3>Conversational Intelligence</h3>
                            <p>Ask questions naturally â€” about your goals, career trajectory, or what to focus on next.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="onboarding-footer">
                <p class="onboarding-note">You don't update this system. It learns from how you work.</p>
                <button class="onboarding-btn" onclick="closeOnboarding()">
                    Get started
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14"/>
                        <path d="M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Command Palette -->
    <div class="cmd-overlay" id="cmd-overlay" onclick="closeCommandPalette(event)">
        <div class="cmd-palette" onclick="event.stopPropagation()">
            <div class="cmd-input-wrapper">
                <input type="text" class="cmd-input" placeholder="Ask anything or search..." autofocus />
            </div>
            <div class="cmd-results">
                <div class="cmd-group">
                    <div class="cmd-group-label">Suggestions</div>
                    <div class="cmd-item selected" onclick="cmdAction('How can I advance my cross-entity goal?')">
                        <div class="cmd-item-icon blue">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4"/>
                                <path d="M12 8h.01"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">How can I advance my cross-entity goal?</div>
                            <div class="cmd-item-desc">Get personalized recommendations</div>
                        </div>
                    </div>
                    <div class="cmd-item" onclick="cmdAction('Show my skill progress')">
                        <div class="cmd-item-icon green">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                <path d="M2 17l10 5 10-5"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">Show my skill progress</div>
                            <div class="cmd-item-desc">View your talent profile</div>
                        </div>
                    </div>
                    <div class="cmd-item" onclick="cmdAction('Find opportunities matching my skills')">
                        <div class="cmd-item-icon purple">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">Find opportunities matching my skills</div>
                            <div class="cmd-item-desc">Explore the talent marketplace</div>
                        </div>
                    </div>
                    <div class="cmd-item" onclick="cmdAction('Am I on a good trajectory to become a Director?')">
                        <div class="cmd-item-icon" style="background: rgba(239, 68, 68, 0.15); color: var(--accent-red);">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 6l-9.5 9.5-5-5L1 18"/>
                                <path d="M17 6h6v6"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">Am I on track for a promotion?</div>
                            <div class="cmd-item-desc">Get your career trajectory assessment</div>
                        </div>
                    </div>
                </div>
                <div class="cmd-group">
                    <div class="cmd-group-label">Quick actions</div>
                    <div class="cmd-item" onclick="cmdAction('I want to add a new goal')">
                        <div class="cmd-item-icon green">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14"/>
                                <path d="M5 12h14"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">Add a new goal</div>
                        </div>
                        <div class="cmd-item-shortcut">
                            <kbd>N</kbd>
                        </div>
                    </div>
                    <div class="cmd-item" onclick="cmdAction('Update my goal progress')">
                        <div class="cmd-item-icon amber">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">Update goal progress</div>
                        </div>
                        <div class="cmd-item-shortcut">
                            <kbd>G</kbd>
                        </div>
                    </div>
                    <div class="cmd-item" onclick="cmdAction('I want to log a contribution')">
                        <div class="cmd-item-icon blue">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <path d="M14 2v6h6"/>
                            </svg>
                        </div>
                        <div class="cmd-item-content">
                            <div class="cmd-item-title">Log a contribution</div>
                        </div>
                        <div class="cmd-item-shortcut">
                            <kbd>C</kbd>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Panel -->
    <div class="detail-panel" id="detail-panel">
        <div class="detail-header">
            <span class="detail-title" id="detail-title">Goal Details</span>
            <button class="detail-close" onclick="closeDetail()">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18"/>
                    <path d="M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div class="detail-body" id="detail-body">
            <!-- Dynamic content -->
        </div>
    </div>

    <!-- Notification Toast -->
    <div class="toast" id="toast">
        <div class="toast-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <path d="M22 4L12 14.01l-3-3"/>
            </svg>
        </div>
        <div class="toast-content">
            <div class="toast-title">New opportunity match</div>
            <div class="toast-text">AI Strategy Lead - Ministry of Digital Â· 100% match</div>
        </div>
        <button class="toast-action" onclick="openDetail('opportunity')">View</button>
    </div>

    <!-- Milestone Identified Popup -->
    <div class="milestone-popup" id="milestone-popup">
        <div class="milestone-popup-content">
            <div class="milestone-popup-header">
                <div class="milestone-popup-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <path d="M22 4L12 14.01l-3-3"/>
                    </svg>
                </div>
                <button class="milestone-popup-close" onclick="closeMilestonePopup()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18"/>
                        <path d="M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="milestone-popup-body">
                <span class="milestone-popup-label">New milestone identified</span>
                <h3 class="milestone-popup-title">AI Assistant MVP successfully launched with 91% satisfaction</h3>
                <p class="milestone-popup-desc">We detected this achievement based on your recent work activity.</p>
                
                <!-- Visual linkage -->
                <div class="milestone-linkage">
                    <div class="linkage-item">
                        <div class="linkage-icon goal">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                        </div>
                        <div class="linkage-content">
                            <span class="linkage-label">Advances goal</span>
                            <span class="linkage-value">GovAI AI Assistant Launch</span>
                            <span class="linkage-impact">+15% progress</span>
                        </div>
                    </div>
                    <div class="linkage-connector"></div>
                    <div class="linkage-item">
                        <div class="linkage-icon skill">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/></svg>
                        </div>
                        <div class="linkage-content">
                            <span class="linkage-label">Skill acquired</span>
                            <span class="linkage-value">Product Launch</span>
                            <span class="linkage-impact">Now at Consistent level</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="milestone-popup-actions">
                <button class="milestone-popup-approve" onclick="approveMilestonePopup()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                    Approve milestone
                </button>
                <button class="milestone-popup-review" onclick="closeMilestonePopup(); openFullView('milestones')">
                    Review details
                </button>
            </div>
        </div>
    </div>

    <!-- Skill Level Popup -->
    <div class="skill-popup" id="skill-popup">
        <div class="skill-popup-content">
            <div class="skill-popup-header">
                <div class="skill-popup-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                        <path d="M2 17l10 5 10-5"/>
                        <path d="M2 12l10 5 10-5"/>
                    </svg>
                </div>
                <button class="skill-popup-close" onclick="closeSkillPopup()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18"/>
                        <path d="M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="skill-popup-body">
                <span class="skill-popup-label">Skill level suggested</span>
                <h3 class="skill-popup-title">AI Product Strategy</h3>
                <p class="skill-popup-desc">Based on your recent milestones and contributions, we suggest updating your skill level.</p>
                
                <div class="skill-level-change">
                    <div class="level-from">
                        <span class="level-badge">Consistent</span>
                        <span class="level-text">Current level</span>
                    </div>
                    <div class="level-arrow">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14"/>
                            <path d="M12 5l7 7-7 7"/>
                        </svg>
                    </div>
                    <div class="level-to">
                        <span class="level-badge suggested">Advanced</span>
                        <span class="level-text">Suggested</span>
                    </div>
                </div>

                <div class="skill-evidence">
                    <span class="evidence-title">Based on evidence:</span>
                    <ul class="evidence-list">
                        <li>Led 3 cross-entity AI strategy initiatives</li>
                        <li>Completed AI Leadership certification</li>
                        <li>Mentored 2 team members in AI product development</li>
                    </ul>
                </div>
            </div>
            <div class="skill-popup-actions">
                <button class="skill-popup-approve" onclick="approveSkillLevel()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                    Accept suggestion
                </button>
                <button class="skill-popup-review" onclick="closeSkillPopup(); openFullView('skills')">
                    Review skills
                </button>
            </div>
        </div>
    </div>

    <!-- Full Goals View -->
    <div class="full-view" id="goals-view">
        <div class="full-view-header">
            <button class="full-view-back" onclick="closeFullView('goals')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5"/>
                    <path d="M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="full-view-title">Your Goals</h1>
        </div>
        <div class="full-view-body">
            <div class="full-view-content">
                <!-- Search Bar -->
                <div class="ask-shareek-container">
                    <div class="section-search-bar" onclick="toggleCommandPalette()">
                        <svg class="section-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" class="section-search-input" placeholder="Ask about your goals..." readonly />
                        <div class="section-search-shortcut">
                            <kbd>âŒ˜</kbd><kbd>K</kbd>
                        </div>
                    </div>
                    <div class="ask-shareek-actions">
                        <button class="quick-action-btn" onclick="startGoalCreation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14"/>
                                <path d="M5 12h14"/>
                            </svg>
                            Add new goal
                        </button>
                        <button class="quick-action-btn" onclick="startContributionLogging()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <path d="M14 2v6h6"/>
                                <path d="M12 18v-6"/>
                                <path d="M9 15h6"/>
                            </svg>
                            Log contribution
                        </button>
                    </div>
                </div>

                <!-- Goals List -->
                <div class="section-title">Active Goals</div>

                <!-- Goal 1 -->
                <div class="goal-card-full" onclick="openDetail('goal')">
                    <div class="goal-card-header">
                        <div>
                            <h3 class="goal-card-title">Launch GovAI's flagship AI assistant for government services</h3>
                            <p class="goal-card-status">Created Jan 2026 Â· 88% complete</p>
                        </div>
                        <span class="goal-card-badge on-track">On Track</span>
                    </div>
                    <div class="goal-progress-bar">
                        <div class="goal-progress-fill green" style="width: 88%"></div>
                    </div>
                    <div class="goal-key-results">
                        <div class="key-result">
                            <span class="key-result-status complete">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                            </span>
                            <span class="key-result-text">Complete MVP with 3 core use cases</span>
                            <span class="key-result-value">3 of 3</span>
                        </div>
                        <div class="key-result">
                            <span class="key-result-status in-progress"></span>
                            <span class="key-result-text">Pilot with 3 government entities</span>
                            <span class="key-result-value">2 of 3</span>
                        </div>
                        <div class="key-result">
                            <span class="key-result-status complete">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                            </span>
                            <span class="key-result-text">Achieve 85%+ user satisfaction in pilots</span>
                            <span class="key-result-value">91%</span>
                        </div>
                    </div>
                </div>

                <!-- Goal 2 -->
                <div class="goal-card-full">
                    <div class="goal-card-header">
                        <div>
                            <h3 class="goal-card-title">Build the AI product management practice at GovAI</h3>
                            <p class="goal-card-status">Created Dec 2025 Â· 65% complete</p>
                        </div>
                        <span class="goal-card-badge in-progress">In Progress</span>
                    </div>
                    <div class="goal-progress-bar">
                        <div class="goal-progress-fill blue" style="width: 65%"></div>
                    </div>
                    <div class="goal-key-results">
                        <div class="key-result">
                            <span class="key-result-status complete">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                            </span>
                            <span class="key-result-text">Define AI product development playbook</span>
                            <span class="key-result-value">Done</span>
                        </div>
                        <div class="key-result">
                            <span class="key-result-status in-progress"></span>
                            <span class="key-result-text">Hire and onboard 2 AI product managers</span>
                            <span class="key-result-value">1 of 2</span>
                        </div>
                    </div>
                </div>

                <!-- Goal 3 -->
                <div class="goal-card-full">
                    <div class="goal-card-header">
                        <div>
                            <h3 class="goal-card-title">Scale AI adoption across government entities</h3>
                            <p class="goal-card-status">Created Jan 2026 Â· 40% complete</p>
                        </div>
                        <span class="goal-card-badge at-risk">Getting Started</span>
                    </div>
                    <div class="goal-progress-bar">
                        <div class="goal-progress-fill amber" style="width: 40%"></div>
                    </div>
                    <div class="goal-key-results">
                        <div class="key-result">
                            <span class="key-result-status complete">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M20 6L9 17l-5-5"/></svg>
                            </span>
                            <span class="key-result-text">Present AI strategy to 5 government entities</span>
                            <span class="key-result-value">2 of 5</span>
                        </div>
                        <div class="key-result">
                            <span class="key-result-status in-progress"></span>
                            <span class="key-result-text">Sign partnership MOUs with 3 entities</span>
                            <span class="key-result-value">0 of 3</span>
                        </div>
                        <div class="key-result">
                            <span class="key-result-status in-progress"></span>
                            <span class="key-result-text">Speak at 2 government AI forums</span>
                            <span class="key-result-value">1 of 2</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Full Skills View -->
    <div class="full-view" id="skills-view">
        <div class="full-view-header">
            <button class="full-view-back" onclick="closeFullView('skills')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5"/>
                    <path d="M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="full-view-title">Your Skills Profile</h1>
        </div>
        <div class="full-view-body">
            <div class="full-view-content">
                <!-- Search Bar -->
                <div class="ask-shareek-container">
                    <div class="section-search-bar" onclick="toggleCommandPalette()">
                        <svg class="section-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" class="section-search-input" placeholder="Ask about your skills..." readonly />
                        <div class="section-search-shortcut">
                            <kbd>âŒ˜</kbd><kbd>K</kbd>
                        </div>
                    </div>
                    <div class="ask-shareek-actions">
                        <button class="quick-action-btn" onclick="startContributionLogging()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <path d="M14 2v6h6"/>
                                <path d="M12 18v-6"/>
                                <path d="M9 15h6"/>
                            </svg>
                            Log contribution to build skills
                        </button>
                    </div>
                </div>

                <!-- Leadership & Strategy -->
                <div class="skill-category">
                    <div class="skill-category-header">
                        <div class="skill-category-icon leadership">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                <circle cx="9" cy="7" r="4"/>
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                            </svg>
                        </div>
                        <span class="skill-category-title">Leadership & Strategy</span>
                    </div>
                    <div class="skills-grid">
                        <div class="skill-card-full" onclick="openDetail('skill')">
                            <div class="skill-card-header">
                                <span class="skill-card-name">AI Product Strategy</span>
                                <span class="skill-card-level consistent">Consistent</span>
                            </div>
                            <p class="skill-card-evidence">12 contributions Â· â†‘ Accelerating</p>
                        </div>
                        <div class="skill-card-full">
                            <div class="skill-card-header">
                                <span class="skill-card-name">Stakeholder Management</span>
                                <span class="skill-card-level advanced">Advanced</span>
                            </div>
                            <p class="skill-card-evidence">18 contributions Â· Stable</p>
                        </div>
                        <div class="skill-card-full">
                            <div class="skill-card-header">
                                <span class="skill-card-name">AI/ML Product Development</span>
                                <span class="skill-card-level consistent">Consistent</span>
                            </div>
                            <p class="skill-card-evidence">9 contributions Â· Growing</p>
                        </div>
                    </div>
                </div>

                <!-- Communication -->
                <div class="skill-category">
                    <div class="skill-category-header">
                        <div class="skill-category-icon communication">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                        </div>
                        <span class="skill-category-title">Communication</span>
                    </div>
                    <div class="skills-grid">
                        <div class="skill-card-full">
                            <div class="skill-card-header">
                                <span class="skill-card-name">Facilitation</span>
                                <span class="skill-card-level consistent">Consistent</span>
                            </div>
                            <p class="skill-card-evidence">8 contributions Â· Stable</p>
                        </div>
                        <div class="skill-card-full">
                            <div class="skill-card-header">
                                <span class="skill-card-name">Executive Communication</span>
                                <span class="skill-card-level emerging">Emerging</span>
                            </div>
                            <p class="skill-card-evidence">3 contributions Â· Gap identified</p>
                        </div>
                    </div>
                </div>

                <!-- Analytical -->
                <div class="skill-category">
                    <div class="skill-category-header">
                        <div class="skill-category-icon analytical">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M23 6l-9.5 9.5-5-5L1 18"/>
                                <path d="M17 6h6v6"/>
                            </svg>
                        </div>
                        <span class="skill-category-title">Analytical</span>
                    </div>
                    <div class="skills-grid">
                        <div class="skill-card-full">
                            <div class="skill-card-header">
                                <span class="skill-card-name">Data Analysis</span>
                                <span class="skill-card-level consistent">Consistent</span>
                            </div>
                            <p class="skill-card-evidence">7 contributions Â· Stable</p>
                        </div>
                        <div class="skill-card-full">
                            <div class="skill-card-header">
                                <span class="skill-card-name">Strategic Planning</span>
                                <span class="skill-card-level emerging">Emerging</span>
                            </div>
                            <p class="skill-card-evidence">4 contributions Â· Growing</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Full Opportunities View -->
    <div class="full-view" id="opportunities-view">
        <div class="full-view-header">
            <button class="full-view-back" onclick="closeFullView('opportunities')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5"/>
                    <path d="M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="full-view-title">Opportunities</h1>
        </div>
        <div class="full-view-body">
            <div class="full-view-content">
                <!-- Search Bar -->
                <div class="ask-shareek-container">
                    <div class="section-search-bar" onclick="toggleCommandPalette()">
                        <svg class="section-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" class="section-search-input" placeholder="Search opportunities..." readonly />
                        <div class="section-search-shortcut">
                            <kbd>âŒ˜</kbd><kbd>K</kbd>
                        </div>
                    </div>
                    <div class="ask-shareek-actions">
                        <button class="quick-action-btn" onclick="startGoalCreation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14"/>
                                <path d="M5 12h14"/>
                            </svg>
                            Set a goal to unlock opportunities
                        </button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="filters-row">
                    <button class="filter-btn active">All</button>
                    <button class="filter-btn">Rotations</button>
                    <button class="filter-btn">Projects</button>
                    <button class="filter-btn">Conferences</button>
                    <button class="filter-btn">Vacancies</button>
                </div>

                <!-- Opportunities List -->
                <div class="section-title">High Matches</div>

                <div class="opportunity-card-full" onclick="openDetail('opportunity')">
                    <div class="opportunity-card-header">
                        <div>
                            <p class="opportunity-card-type">Rotation</p>
                            <h3 class="opportunity-card-title">AI Strategy Lead - Ministry of Digital</h3>
                        </div>
                        <span class="opportunity-card-match">100% match</span>
                    </div>
                    <div class="opportunity-card-meta">
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            Ministry of Digital Government
                        </span>
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                            6 months
                        </span>
                    </div>
                    <div class="opportunity-card-skills">
                        <span class="opportunity-skill-tag match">AI Product Strategy</span>
                        <span class="opportunity-skill-tag match">Stakeholder Management</span>
                        <span class="opportunity-skill-tag match">Cross-entity coordination</span>
                    </div>
                </div>

                <div class="opportunity-card-full">
                    <div class="opportunity-card-header">
                        <div>
                            <p class="opportunity-card-type">Conference</p>
                            <h3 class="opportunity-card-title">Government AI Summit 2026</h3>
                        </div>
                        <span class="opportunity-card-match">95% match</span>
                    </div>
                    <div class="opportunity-card-meta">
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            Ministry of Cabinet Affairs
                        </span>
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                            Jan 30, 2026
                        </span>
                    </div>
                    <div class="opportunity-card-skills">
                        <span class="opportunity-skill-tag match">AI/ML Product Development</span>
                        <span class="opportunity-skill-tag">Executive Communication</span>
                        <span class="opportunity-skill-tag match">Strategic Planning</span>
                    </div>
                </div>

                <div class="opportunity-card-full">
                    <div class="opportunity-card-header">
                        <div>
                            <p class="opportunity-card-type">Project</p>
                            <h3 class="opportunity-card-title">AI Ethics & Governance Taskforce</h3>
                        </div>
                        <span class="opportunity-card-match" style="background: rgba(59, 130, 246, 0.15); color: var(--accent-blue);">87% match</span>
                    </div>
                    <div class="opportunity-card-meta">
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            Cross-government
                        </span>
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                            3 months
                        </span>
                    </div>
                    <div class="opportunity-card-skills">
                        <span class="opportunity-skill-tag match">Strategic Planning</span>
                        <span class="opportunity-skill-tag match">Data Analysis</span>
                        <span class="opportunity-skill-tag">Digital Transformation</span>
                    </div>
                </div>

                <div class="opportunity-card-full">
                    <div class="opportunity-card-header">
                        <div>
                            <p class="opportunity-card-type">Conference</p>
                            <h3 class="opportunity-card-title">Government Leaders Summit 2026</h3>
                        </div>
                        <span class="opportunity-card-match" style="background: rgba(59, 130, 246, 0.15); color: var(--accent-blue);">82% match</span>
                    </div>
                    <div class="opportunity-card-meta">
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
                            Abu Dhabi
                        </span>
                        <span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                            Feb 15-16, 2026
                        </span>
                    </div>
                    <div class="opportunity-card-skills">
                        <span class="opportunity-skill-tag match">Stakeholder Management</span>
                        <span class="opportunity-skill-tag">Executive Communication</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Full Milestones View -->
    <div class="full-view" id="milestones-view">
        <div class="full-view-header">
            <button class="full-view-back" onclick="closeFullView('milestones')">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5"/>
                    <path d="M12 19l-7-7 7-7"/>
                </svg>
            </button>
            <h1 class="full-view-title">Work Milestones</h1>
        </div>
        <div class="full-view-body">
            <div class="full-view-content">
                <!-- Search Bar -->
                <div class="ask-shareek-container">
                    <div class="section-search-bar" onclick="toggleCommandPalette()">
                        <svg class="section-search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" class="section-search-input" placeholder="Search milestones..." readonly />
                        <div class="section-search-shortcut">
                            <kbd>âŒ˜</kbd><kbd>K</kbd>
                        </div>
                    </div>
                    <div class="ask-shareek-actions">
                        <button class="quick-action-btn" onclick="startContributionLogging()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14"/>
                                <path d="M5 12h14"/>
                            </svg>
                            Log a milestone manually
                        </button>
                    </div>
                </div>

                <!-- Filters -->
                <div class="filters-row">
                    <button class="filter-btn active">All</button>
                    <button class="filter-btn pending-filter">Pending Approval</button>
                    <button class="filter-btn">Approved</button>
                </div>

                <!-- Pending Section -->
                <div class="section-title pending-title">
                    <span class="pending-indicator"></span>
                    Pending Approval
                </div>

                <div class="milestone-card-full pending" onclick="showMilestoneApproval()">
                    <div class="milestone-card-status">
                        <span class="milestone-status-dot pending"></span>
                        <span class="milestone-status-text">Awaiting your approval</span>
                    </div>
                    <h3 class="milestone-card-title">AI Assistant MVP successfully launched with 91% satisfaction</h3>
                    <p class="milestone-card-date">Detected on Jan 27, 2026</p>
                    <div class="milestone-card-links">
                        <div class="milestone-link-group">
                            <span class="milestone-link-label">Linked Goal</span>
                            <span class="milestone-link-value goal" onclick="event.stopPropagation(); openDetail('goal')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                                GovAI AI Assistant Launch
                            </span>
                        </div>
                        <div class="milestone-link-group">
                            <span class="milestone-link-label">Skill Demonstrated</span>
                            <span class="milestone-link-value skill" onclick="event.stopPropagation(); openDetail('skill')">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg>
                                Product Launch
                            </span>
                        </div>
                    </div>
                    <div class="milestone-card-actions">
                        <button class="milestone-approve-btn" onclick="event.stopPropagation(); approveMilestoneFromList(this)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                            Approve
                        </button>
                        <button class="milestone-edit-btn" onclick="event.stopPropagation()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                            Edit
                        </button>
                    </div>
                </div>

                <!-- Approved Section -->
                <div class="section-title">Approved Milestones</div>

                <div class="milestone-card-full approved">
                    <div class="milestone-card-status">
                        <span class="milestone-status-dot approved"></span>
                        <span class="milestone-status-text">Approved on Jan 25</span>
                    </div>
                    <h3 class="milestone-card-title">Led product strategy alignment across 3 government entities</h3>
                    <p class="milestone-card-date">Detected on Jan 24, 2026</p>
                    <div class="milestone-card-links">
                        <div class="milestone-link-group">
                            <span class="milestone-link-label">Linked Goal</span>
                            <span class="milestone-link-value goal">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                                Scale AI adoption across government
                            </span>
                        </div>
                        <div class="milestone-link-group">
                            <span class="milestone-link-label">Skill Demonstrated</span>
                            <span class="milestone-link-value skill">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg>
                                AI Product Strategy
                            </span>
                        </div>
                    </div>
                </div>

                <div class="milestone-card-full approved">
                    <div class="milestone-card-status">
                        <span class="milestone-status-dot approved"></span>
                        <span class="milestone-status-text">Approved on Jan 22</span>
                    </div>
                    <h3 class="milestone-card-title">Published AI governance framework adopted by GovAI</h3>
                    <p class="milestone-card-date">Detected on Jan 20, 2026</p>
                    <div class="milestone-card-links">
                        <div class="milestone-link-group">
                            <span class="milestone-link-label">Linked Goal</span>
                            <span class="milestone-link-value goal">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>
                                Build AI PM Practice
                            </span>
                        </div>
                        <div class="milestone-link-group">
                            <span class="milestone-link-label">Skill Demonstrated</span>
                            <span class="milestone-link-value skill">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg>
                                AI Governance
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Command Palette
        function toggleCommandPalette() {
            document.getElementById('cmd-overlay').classList.toggle('active');
            if (document.getElementById('cmd-overlay').classList.contains('active')) {
                document.querySelector('.cmd-input').focus();
            }
        }

        function closeCommandPalette(e) {
            if (e.target === document.getElementById('cmd-overlay')) {
                document.getElementById('cmd-overlay').classList.remove('active');
            }
        }

        // Notifications
        function toggleNotifications() {
            const dropdown = document.getElementById('notifications-dropdown');
            dropdown.classList.toggle('active');
        }

        // Close notifications when clicking outside
        document.addEventListener('click', (e) => {
            const dropdown = document.getElementById('notifications-dropdown');
            const trigger = document.querySelector('.notifications-trigger');
            if (dropdown && !dropdown.contains(e.target) && !trigger.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Milestone Approval Modal
        function showMilestoneApproval() {
            document.getElementById('notifications-dropdown').classList.remove('active');
            document.getElementById('milestone-modal').classList.add('active');
        }

        function closeMilestoneModal() {
            document.getElementById('milestone-modal').classList.remove('active');
        }

        function approveMilestone() {
            closeMilestoneModal();
            // Show success toast
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Milestone approved';
            toast.querySelector('.toast-text').textContent = 'AI Assistant MVP launch added to your profile';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
            
            // Update notification badge
            const badge = document.querySelector('.notification-badge');
            if (badge) {
                const count = parseInt(badge.textContent) - 1;
                badge.textContent = count;
                if (count === 0) badge.style.display = 'none';
            }
            
            // Update alert badge on milestones card
            updateMilestonesAlert();
        }

        function approveMilestoneFromList(btn) {
            const card = btn.closest('.milestone-card-full');
            card.classList.remove('pending');
            card.classList.add('approved');
            
            // Update status
            const statusDot = card.querySelector('.milestone-status-dot');
            statusDot.classList.remove('pending');
            statusDot.classList.add('approved');
            
            const statusText = card.querySelector('.milestone-status-text');
            statusText.textContent = 'Approved just now';
            
            // Remove action buttons
            const actions = card.querySelector('.milestone-card-actions');
            if (actions) actions.remove();
            
            // Show success toast
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Milestone approved';
            toast.querySelector('.toast-text').textContent = 'Added to your profile';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
            
            // Update alert badge
            updateMilestonesAlert();
        }

        function approveMilestoneFromSidebar(btn) {
            const card = btn.closest('.milestone-detail-card');
            card.classList.remove('pending');
            
            // Update status
            const statusDot = card.querySelector('.milestone-detail-dot');
            statusDot.classList.remove('pending');
            statusDot.classList.add('approved');
            
            const statusText = card.querySelector('.milestone-detail-status span:last-child');
            statusText.textContent = 'Approved just now';
            
            // Remove action buttons
            const actions = card.querySelector('.milestone-detail-actions');
            if (actions) actions.remove();
            
            // Show success toast
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Milestone approved';
            toast.querySelector('.toast-text').textContent = 'AI Assistant MVP launch added to your profile';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
            
            // Mark as seen in localStorage
            localStorage.setItem('shareek_milestone_seen', 'true');
        }

        function updateMilestonesAlert() {
            const alertBadge = document.querySelector('.action-alert');
            const pendingCards = document.querySelectorAll('.milestone-card-full.pending').length;
            
            if (alertBadge) {
                if (pendingCards === 0) {
                    alertBadge.style.display = 'none';
                    const card = alertBadge.closest('.action-card');
                    if (card) {
                        card.classList.remove('has-alert');
                    }
                } else {
                    alertBadge.querySelector('span:last-child').textContent = pendingCards + ' pending';
                }
            }
            
            // Update floating nav button
            const floatingBtn = document.getElementById('floating-milestones-btn');
            if (floatingBtn) {
                if (pendingCards === 0) {
                    floatingBtn.classList.remove('has-alert-dot');
                }
            }
        }

        // Contribution Approval
        function approveContribution(btn) {
            const item = btn.closest('.contribution-item');
            item.classList.remove('new');
            item.classList.add('approved');
            
            const statusDot = item.querySelector('.status-dot');
            statusDot.classList.remove('new');
            statusDot.classList.add('approved');
            
            const statusLabel = item.querySelector('.status-label');
            statusLabel.textContent = 'Approved';
            
            // Remove actions
            const actions = item.querySelector('.contribution-actions');
            if (actions) actions.remove();
            
            // Show toast
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Contribution approved';
            toast.querySelector('.toast-text').textContent = 'Added to your skills profile';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Onboarding
        function showOnboarding() {
            document.getElementById('onboarding-overlay').classList.add('active');
        }

        function closeOnboarding() {
            document.getElementById('onboarding-overlay').classList.remove('active');
            
            // Show milestone popup 20 seconds after onboarding closes
            setTimeout(() => showMilestonePopup(), 20000);
        }

        // Always show onboarding on page load
        setTimeout(() => showOnboarding(), 500);

        // Milestone Popup
        function showMilestonePopup() {
            document.getElementById('milestone-popup').classList.add('active');
        }

        function closeMilestonePopup() {
            document.getElementById('milestone-popup').classList.remove('active');
        }

        function approveMilestonePopup() {
            closeMilestonePopup();
            
            // Show success toast
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Milestone approved';
            toast.querySelector('.toast-text').textContent = 'AI Assistant MVP launch added to your profile';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
        }

        // Skill Level Popup
        function showSkillPopup() {
            document.getElementById('skill-popup').classList.add('active');
        }

        function closeSkillPopup() {
            document.getElementById('skill-popup').classList.remove('active');
        }

        function approveSkillLevel() {
            closeSkillPopup();
            
            // Show success toast
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Skill level updated';
            toast.querySelector('.toast-text').textContent = 'AI Product Strategy is now at Advanced level';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
            
            // Mark as seen
            localStorage.setItem('shareek_skill_level_seen', 'true');
        }

        // Scroll to section
        function scrollToSection(section) {
            // Close any open full views
            document.querySelectorAll('.full-view.active').forEach(view => {
                view.classList.remove('active');
            });
            document.body.style.overflow = '';
            
            if (section === 'top') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            // Update active state
            updateFloatingNavActive('home');
        }
        
        function updateFloatingNavActive(viewId) {
            document.querySelectorAll('.floating-nav-btn').forEach(btn => btn.classList.remove('active'));
            const buttons = document.querySelectorAll('.floating-nav-btn');
            const viewMap = { 'home': 0, 'goals': 1, 'skills': 2, 'opportunities': 3, 'milestones': 4 };
            if (viewMap[viewId] !== undefined && buttons[viewMap[viewId]]) {
                buttons[viewMap[viewId]].classList.add('active');
            }
        }

        // Keyboard shortcut
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                toggleCommandPalette();
            }
            if (e.key === 'Escape') {
                document.getElementById('cmd-overlay').classList.remove('active');
                closeDetail();
                closeFullView('goals');
                closeFullView('skills');
                closeFullView('opportunities');
            }
        });

        // Detail Panel
        function openDetail(type) {
            const panel = document.getElementById('detail-panel');
            const title = document.getElementById('detail-title');
            const body = document.getElementById('detail-body');

            const content = {
                goal: {
                    title: "GovAI's AI Assistant Launch",
                    body: `
                        <div class="detail-section">
                            <div class="detail-progress">
                                <div class="detail-progress-header">
                                    <span class="detail-progress-label">Overall progress</span>
                                    <span class="detail-progress-value">88%</span>
                                </div>
                                <div class="detail-progress-bar">
                                    <div class="detail-progress-fill" style="width: 88%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Key Results</div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Cross-entity contributions</span>
                                <span class="detail-stat-value green">4 of 3 âœ“</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Stakeholder recognitions</span>
                                <span class="detail-stat-value amber">2 of 3</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Framework adoptions</span>
                                <span class="detail-stat-value green">1 of 1 âœ“</span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Related Skills</div>
                            <div class="detail-skills">
                                <span class="detail-skill-tag" onclick="openDetail('skill')">
                                    <span class="skill-status advancing"></span>
                                    AI Product Strategy
                                    <span class="skill-level">Consistent â†‘</span>
                                </span>
                                <span class="detail-skill-tag" onclick="closeDetail(); setTimeout(() => openDetail('skill'), 300);">
                                    <span class="skill-status stable"></span>
                                    Stakeholder Management
                                    <span class="skill-level">Advanced</span>
                                </span>
                                <span class="detail-skill-tag gap" onclick="closeDetail(); setTimeout(() => openDetail('skill'), 300);">
                                    <span class="skill-status gap"></span>
                                    Executive Communication
                                    <span class="skill-level">Emerging</span>
                                </span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">What I'm noticing</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                You're one stakeholder recognition away from completing this goal. 
                                Your <strong>AI Product Strategy</strong> skill is accelerating â€” keep leveraging it.
                                However, <strong>Executive Communication</strong> shows a gap that could slow your progress.
                            </p>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Recommended Actions</div>
                            <div class="detail-action-cards">
                                <div class="detail-action-card" onclick="sendMessage('Tell me about the AI Summit')">
                                    <div class="detail-action-icon opportunity">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="4" width="18" height="18" rx="2"/>
                                            <path d="M16 2v4"/>
                                            <path d="M8 2v4"/>
                                            <path d="M3 10h18"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Present at AI Summit</span>
                                        <span class="detail-action-desc">Earn stakeholder recognition + strengthen Executive Communication</span>
                                    </div>
                                    <span class="detail-action-badge">High impact</span>
                                </div>
                                <div class="detail-action-card" onclick="startContributionLogging()">
                                    <div class="detail-action-icon contribution">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                            <path d="M14 2v6h6"/>
                                            <path d="M12 18v-6"/>
                                            <path d="M9 15h6"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Log a contribution</span>
                                        <span class="detail-action-desc">Record cross-entity work to advance this goal</span>
                                    </div>
                                </div>
                                <div class="detail-action-card" onclick="openFullView('opportunities')">
                                    <div class="detail-action-icon rotation">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="11" width="18" height="11" rx="2"/>
                                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Ministry of Digital Government Rotation</span>
                                        <span class="detail-action-desc">100% skill match Â· Would complete this goal</span>
                                    </div>
                                    <span class="detail-action-badge match">100% match</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Skill Gap to Address</div>
                            <div class="detail-gap-card" onclick="sendMessage('How can I improve my Executive Communication?')">
                                <div class="detail-gap-header">
                                    <span class="detail-gap-skill">Executive Communication</span>
                                    <span class="detail-gap-level">Emerging â†’ Consistent needed</span>
                                </div>
                                <p class="detail-gap-desc">This skill is important for stakeholder recognition but has limited recent evidence. Presenting at the Summit would help close this gap.</p>
                                <div class="detail-gap-actions">
                                    <button class="detail-gap-btn primary" onclick="event.stopPropagation(); sendMessage('Find opportunities to practice Executive Communication')">Find opportunities</button>
                                    <button class="detail-gap-btn" onclick="event.stopPropagation(); openFullView('skills')">View skill profile</button>
                                </div>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('goals')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14"/>
                                <path d="M12 5l7 7-7 7"/>
                            </svg>
                            See all goals
                        </div>
                    `
                },
                skill: {
                    title: 'AI Product Strategy',
                    body: `
                        <div class="detail-section">
                            <div class="detail-progress">
                                <div class="detail-progress-header">
                                    <span class="detail-progress-label">Progress to Advanced</span>
                                    <span class="detail-progress-value">75%</span>
                                </div>
                                <div class="detail-progress-bar">
                                    <div class="detail-progress-fill" style="width: 75%; background: var(--gradient-blue);"></div>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-stat">
                                <span class="detail-stat-label">Current level</span>
                                <span class="detail-stat-value blue">Consistent</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Trajectory</span>
                                <span class="detail-stat-value green">â†‘ Accelerating</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Evidence signals</span>
                                <span class="detail-stat-value">12 contributions</span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Linked Goals</div>
                            <div class="detail-linked-goals">
                                <div class="detail-linked-goal" onclick="openDetail('goal')">
                                    <div class="linked-goal-progress" style="--progress: 88%"></div>
                                    <div class="linked-goal-content">
                                        <span class="linked-goal-title">GovAI AI Assistant Launch</span>
                                        <span class="linked-goal-status">88% complete</span>
                                    </div>
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="linked-goal-arrow">
                                        <path d="M9 18l6-6-6-6"/>
                                    </svg>
                                </div>
                                <div class="detail-linked-goal" onclick="closeDetail(); setTimeout(() => openDetail('goal'), 300);">
                                    <div class="linked-goal-progress" style="--progress: 40%"></div>
                                    <div class="linked-goal-content">
                                        <span class="linked-goal-title">Scale AI adoption across government</span>
                                        <span class="linked-goal-status">40% complete</span>
                                    </div>
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="linked-goal-arrow">
                                        <path d="M9 18l6-6-6-6"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Recent Evidence</div>
                            <div class="detail-evidence-list">
                                <div class="detail-evidence-item">
                                    <span class="evidence-date">Jan 23</span>
                                    <span class="evidence-text">Led cross-entity alignment workshop</span>
                                </div>
                                <div class="detail-evidence-item">
                                    <span class="evidence-date">Jan 18</span>
                                    <span class="evidence-text">Coordinated 4-entity procurement framework</span>
                                </div>
                                <div class="detail-evidence-item">
                                    <span class="evidence-date">Jan 12</span>
                                    <span class="evidence-text">Facilitated consensus on 9 of 12 decision points</span>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">To Reach Advanced</div>
                            <div class="detail-action-cards">
                                <div class="detail-action-card" onclick="sendMessage('Tell me about the AI Summit')">
                                    <div class="detail-action-icon opportunity">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="4" width="18" height="18" rx="2"/>
                                            <path d="M16 2v4"/>
                                            <path d="M8 2v4"/>
                                            <path d="M3 10h18"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Present at AI Summit</span>
                                        <span class="detail-action-desc">High-stakes presentation = major evidence signal</span>
                                    </div>
                                    <span class="detail-action-badge">Recommended</span>
                                </div>
                                <div class="detail-action-card" onclick="startContributionLogging()">
                                    <div class="detail-action-icon contribution">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                            <path d="M14 2v6h6"/>
                                            <path d="M12 18v-6"/>
                                            <path d="M9 15h6"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Log a collaboration contribution</span>
                                        <span class="detail-action-desc">Add evidence to strengthen this skill</span>
                                    </div>
                                </div>
                                <div class="detail-action-card" onclick="openFullView('opportunities')">
                                    <div class="detail-action-icon rotation">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="11" width="18" height="11" rx="2"/>
                                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Explore rotation opportunities</span>
                                        <span class="detail-action-desc">3 opportunities match this skill</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('skills')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14"/>
                                <path d="M12 5l7 7-7 7"/>
                            </svg>
                            See all skills
                        </div>
                    `
                },
                opportunity: {
                    title: 'AI Strategy Lead - Ministry of Digital',
                    body: `
                        <div class="detail-section">
                            <div class="detail-stat">
                                <span class="detail-stat-label">Entity</span>
                                <span class="detail-stat-value">Ministry of Digital Government</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Type</span>
                                <span class="detail-stat-value">6-month rotation</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Skill match</span>
                                <span class="detail-stat-value green">100%</span>
                            </div>
                            <div class="detail-stat">
                                <span class="detail-stat-label">Goal alignment</span>
                                <span class="detail-stat-value green">High</span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Matched Skills</div>
                            <div class="detail-skills">
                                <span class="detail-skill-tag" onclick="openDetail('skill')">
                                    <span class="skill-status advancing"></span>
                                    AI Product Strategy
                                    <span class="skill-level">Consistent â†‘</span>
                                </span>
                                <span class="detail-skill-tag" onclick="closeDetail(); setTimeout(() => openDetail('skill'), 300);">
                                    <span class="skill-status stable"></span>
                                    Stakeholder Management
                                    <span class="skill-level">Advanced</span>
                                </span>
                                <span class="detail-skill-tag" onclick="closeDetail(); setTimeout(() => openDetail('skill'), 300);">
                                    <span class="skill-status stable"></span>
                                    AI/ML Product Development
                                    <span class="skill-level">Consistent</span>
                                </span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Goals This Advances</div>
                            <div class="detail-linked-goals">
                                <div class="detail-linked-goal" onclick="openDetail('goal')">
                                    <div class="linked-goal-progress" style="--progress: 88%"></div>
                                    <div class="linked-goal-content">
                                        <span class="linked-goal-title">GovAI AI Assistant Launch</span>
                                        <span class="linked-goal-status">Would complete this goal</span>
                                    </div>
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="linked-goal-arrow">
                                        <path d="M9 18l6-6-6-6"/>
                                    </svg>
                                </div>
                                <div class="detail-linked-goal" onclick="closeDetail(); setTimeout(() => openDetail('goal'), 300);">
                                    <div class="linked-goal-progress" style="--progress: 40%"></div>
                                    <div class="linked-goal-content">
                                        <span class="linked-goal-title">Scale AI adoption across government</span>
                                        <span class="linked-goal-status">Major advancement</span>
                                    </div>
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="linked-goal-arrow">
                                        <path d="M9 18l6-6-6-6"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Why You're a Strong Match</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; line-height: 1.6; margin-bottom: 1rem;">
                                Your recent cross-entity work and accelerating <strong>AI Product Strategy</strong> skill make you 
                                an ideal candidate. This role would complete your AI product leader goal and 
                                significantly advance your path to AI leadership in government.
                            </p>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Actions</div>
                            <div class="detail-action-cards">
                                <div class="detail-action-card" onclick="sendMessage('I want to express interest in the Ministry of Digital Government rotation')">
                                    <div class="detail-action-icon rotation">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                            <path d="M22 4L12 14.01l-3-3"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Express interest</span>
                                        <span class="detail-action-desc">Start the application process</span>
                                    </div>
                                    <span class="detail-action-badge match">Recommended</span>
                                </div>
                                <div class="detail-action-card" onclick="sendMessage('Tell me more about the Ministry of Digital Government rotation')">
                                    <div class="detail-action-icon contribution">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="12" r="10"/>
                                            <path d="M12 16v-4"/>
                                            <path d="M12 8h.01"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Learn more</span>
                                        <span class="detail-action-desc">Get detailed requirements and expectations</span>
                                    </div>
                                </div>
                                <div class="detail-action-card" onclick="sendMessage('Compare this rotation to other opportunities')">
                                    <div class="detail-action-icon opportunity">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M16 3h5v5"/>
                                            <path d="M8 3H3v5"/>
                                            <path d="M21 3l-7 7"/>
                                            <path d="M3 3l7 7"/>
                                            <path d="M21 21l-7-7"/>
                                            <path d="M3 21l7-7"/>
                                            <path d="M16 21h5v-5"/>
                                            <path d="M8 21H3v-5"/>
                                        </svg>
                                    </div>
                                    <div class="detail-action-content">
                                        <span class="detail-action-title">Compare options</span>
                                        <span class="detail-action-desc">See how this stacks up against other matches</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('opportunities')">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M5 12h14"/>
                                <path d="M12 5l7 7-7 7"/>
                            </svg>
                            See all opportunities
                        </div>
                    `
                },
                goals: {
                    title: 'Your Goals',
                    body: `
                        <div class="detail-section">
                            <div class="detail-section-title">Active Goals</div>
                            <div class="inline-card" style="margin: 0 0 1rem 0; cursor: pointer;" onclick="openDetail('goal')">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">GovAI AI Assistant Launch</span>
                                    <span class="inline-card-badge">88%</span>
                                </div>
                                <div class="inline-card-body">1 pilot entity remaining</div>
                            </div>
                            <div class="inline-card" style="margin: 0 0 1rem 0;">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">Build AI PM Practice</span>
                                    <span class="inline-card-badge" style="background: rgba(59, 130, 246, 0.15); color: var(--accent-blue);">65%</span>
                                </div>
                                <div class="inline-card-body">1 hire remaining</div>
                            </div>
                            <div class="inline-card" style="margin: 0;">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">Scale AI adoption across government</span>
                                    <span class="inline-card-badge" style="background: rgba(245, 158, 11, 0.15); color: var(--accent-amber);">40%</span>
                                </div>
                                <div class="inline-card-body">Just getting started</div>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('goals')">
                            See all goals
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                        </div>
                    `
                },
                skills: {
                    title: 'Your Skills',
                    body: `
                        <div class="detail-section">
                            <div class="detail-section-title">Leadership & Strategy</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                <span class="skill-tag" onclick="openDetail('skill')"><span class="level consistent"></span>AI Product Strategy</span>
                                <span class="skill-tag"><span class="level advanced"></span>Stakeholder Management</span>
                                <span class="skill-tag"><span class="level consistent"></span>AI/ML Product Development</span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Communication</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                <span class="skill-tag"><span class="level consistent"></span>Facilitation</span>
                                <span class="skill-tag"><span class="level emerging"></span>Executive Communication</span>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Analytical</div>
                            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                                <span class="skill-tag"><span class="level consistent"></span>Data Analysis</span>
                                <span class="skill-tag"><span class="level consistent"></span>Strategic Planning</span>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('skills')">
                            See full skills profile
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                        </div>
                    `
                },
                opportunities: {
                    title: 'Opportunities',
                    body: `
                        <div class="detail-section">
                            <div class="detail-section-title">High Matches</div>
                            <div class="inline-card" style="margin: 0 0 1rem 0; cursor: pointer;" onclick="openDetail('opportunity')">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">AI Strategy Lead - Ministry of Digital</span>
                                    <span class="inline-card-badge">100% match</span>
                                </div>
                                <div class="inline-card-body">Ministry of Digital Government Â· 6-month rotation</div>
                            </div>
                            <div class="inline-card" style="margin: 0 0 1rem 0;">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">AI Summit Presenter</span>
                                    <span class="inline-card-badge">95% match</span>
                                </div>
                                <div class="inline-card-body">Jan 30 Â· Ministry of Cabinet Affairs</div>
                            </div>
                            <div class="inline-card" style="margin: 0 0 1rem 0;">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">AI Ethics & Governance Taskforce</span>
                                    <span class="inline-card-badge" style="background: rgba(59, 130, 246, 0.15); color: var(--accent-blue);">87% match</span>
                                </div>
                                <div class="inline-card-body">Cross-government initiative Â· 3-month project</div>
                            </div>
                            <div class="inline-card" style="margin: 0;">
                                <div class="inline-card-header">
                                    <span class="inline-card-title">Government Leaders Summit 2026</span>
                                    <span class="inline-card-badge" style="background: rgba(59, 130, 246, 0.15); color: var(--accent-blue);">82% match</span>
                                </div>
                                <div class="inline-card-body">Feb 15-16 Â· Abu Dhabi Â· Conference</div>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('opportunities')">
                            See all opportunities
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                        </div>
                    `
                },
                milestones: {
                    title: 'Work Milestones',
                    body: `
                        <div class="detail-section">
                            <p class="detail-intro">Achievements auto-detected from your work activity</p>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title" style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="width: 8px; height: 8px; background: var(--accent-orange); border-radius: 50%; animation: pulse 2s infinite;"></span>
                                Pending Approval
                            </div>
                            <div class="milestone-detail-card pending" id="sidebar-pending-milestone">
                                <div class="milestone-detail-status">
                                    <span class="milestone-detail-dot pending"></span>
                                    <span>Awaiting your approval</span>
                                </div>
                                <h4 class="milestone-detail-title">AI Assistant MVP successfully launched with 91% satisfaction</h4>
                                <div class="milestone-detail-meta">
                                    <span class="milestone-detail-date">Detected Jan 27</span>
                                </div>
                                <div class="milestone-detail-links">
                                    <span class="milestone-link-tag goal">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                                        GovAI AI Assistant Launch
                                    </span>
                                    <span class="milestone-link-tag skill">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg>
                                        Product Launch
                                    </span>
                                </div>
                                <div class="milestone-detail-actions">
                                    <button class="milestone-detail-approve" onclick="approveMilestoneFromSidebar(this)">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>
                                        Approve
                                    </button>
                                    <button class="milestone-detail-edit">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                                        Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="detail-section-title">Recently Approved</div>
                            <div class="milestone-detail-card">
                                <div class="milestone-detail-status">
                                    <span class="milestone-detail-dot approved"></span>
                                    <span>Approved Jan 25</span>
                                </div>
                                <h4 class="milestone-detail-title">Led product strategy alignment across 3 government entities</h4>
                                <div class="milestone-detail-links">
                                    <span class="milestone-link-tag goal">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                                        Scale AI adoption
                                    </span>
                                    <span class="milestone-link-tag skill">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg>
                                        AI Product Strategy
                                    </span>
                                </div>
                            </div>
                            <div class="milestone-detail-card" style="margin-top: 0.75rem;">
                                <div class="milestone-detail-status">
                                    <span class="milestone-detail-dot approved"></span>
                                    <span>Approved Jan 22</span>
                                </div>
                                <h4 class="milestone-detail-title">Published AI governance framework adopted by GovAI</h4>
                                <div class="milestone-detail-links">
                                    <span class="milestone-link-tag goal">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/></svg>
                                        Build AI PM Practice
                                    </span>
                                    <span class="milestone-link-tag skill">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/></svg>
                                        AI Governance
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="see-more-link" onclick="openFullView('milestones')">
                            See all milestones
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
                        </div>
                    `
                }
            };

            const data = content[type] || content.goal;
            title.textContent = data.title;
            body.innerHTML = data.body;
            panel.classList.add('active');
        }

        function closeDetail() {
            document.getElementById('detail-panel').classList.remove('active');
        }

        // Add Goal - opens command palette with goal prompt
        function openAddGoalModal() {
            toggleCommandPalette();
            setTimeout(() => {
                document.querySelector('.cmd-input').value = 'I want to set a new goal: ';
                document.querySelector('.cmd-input').focus();
            }, 100);
        }

        // Command palette action - sends the query to chat
        function cmdAction(query) {
            document.getElementById('cmd-overlay').classList.remove('active');
            sendMessage(query);
        }

        // Full View Navigation
        function openFullView(viewId) {
            closeDetail();
            // Close any other open full views first
            document.querySelectorAll('.full-view.active').forEach(view => {
                view.classList.remove('active');
            });
            document.getElementById(viewId + '-view').classList.add('active');
            document.body.style.overflow = 'hidden';
            updateFloatingNavActive(viewId);
        }

        function closeFullView(viewId) {
            document.getElementById(viewId + '-view').classList.remove('active');
            document.body.style.overflow = '';
            updateFloatingNavActive('home');
        }

        // ============================================
        // CHATBOT FUNCTIONALITY
        // ============================================

        const messagesContainer = document.querySelector('.messages');
        
        // Conversation state for multi-turn flows
        let conversationState = {
            mode: null, // 'creating_goal', 'logging_contribution', etc.
            goalDraft: {
                objective: '',
                keyResults: [],
                skills: []
            },
            contributionDraft: {
                description: '',
                skills: [],
                goals: [],
                category: '',
                step: 'description'
            }
        };

        // Reset conversation state
        function resetState() {
            conversationState = {
                mode: null,
                goalDraft: { objective: '', keyResults: [], skills: [] },
                contributionDraft: { description: '', skills: [], goals: [], category: '', step: 'description' }
            };
        }

        // Start goal creation from any entry point
        function startGoalCreation() {
            // Close any open full views
            document.querySelectorAll('.full-view').forEach(v => v.classList.remove('active'));
            closeDetail();
            
            // Start the goal creation flow
            sendMessage('I want to add a new goal');
            
            // Scroll to chat
            setTimeout(() => {
                document.querySelector('.conversation').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        // Start contribution logging from any entry point
        function startContributionLogging() {
            // Close any open full views
            document.querySelectorAll('.full-view').forEach(v => v.classList.remove('active'));
            closeDetail();
            
            // Start the contribution flow
            sendMessage('I want to log a contribution');
            
            // Scroll to chat
            setTimeout(() => {
                document.querySelector('.conversation').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        // Add user message to chat
        function addUserMessage(text) {
            const messageHtml = `
                <div class="message">
                    <div class="message-avatar user">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                    </div>
                    <div class="message-content">
                        <p class="message-sender">You</p>
                        <p class="message-text">${escapeHtml(text)}</p>
                    </div>
                </div>
            `;
            messagesContainer.insertAdjacentHTML('beforeend', messageHtml);
            scrollToBottom();
        }

        // Add typing indicator
        function showTyping() {
            const typingHtml = `
                <div class="message typing-message">
                    <div class="message-avatar ai">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="message-content">
                        <p class="message-sender">Shareek</p>
                        <div class="typing">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            messagesContainer.insertAdjacentHTML('beforeend', typingHtml);
            scrollToBottom();
        }

        // Remove typing indicator
        function hideTyping() {
            const typingMsg = document.querySelector('.typing-message');
            if (typingMsg) typingMsg.remove();
        }

        // Add AI response
        function addAIResponse(text, card = null) {
            hideTyping();
            let cardHtml = '';
            if (card) {
                cardHtml = `
                    <div class="inline-card">
                        <div class="inline-card-header">
                            <span class="inline-card-title">${card.title}</span>
                            ${card.badge ? `<span class="inline-card-badge">${card.badge}</span>` : ''}
                        </div>
                        <div class="inline-card-body">${card.body}</div>
                        ${card.actions ? `
                            <div class="inline-card-actions">
                                ${card.actions.map(a => `<button class="inline-btn ${a.primary ? 'primary' : 'secondary'}" onclick="${a.onclick || ''}">${a.label}</button>`).join('')}
                            </div>
                        ` : ''}
                    </div>
                `;
            }
            const messageHtml = `
                <div class="message">
                    <div class="message-avatar ai">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5"/>
                        </svg>
                    </div>
                    <div class="message-content">
                        <p class="message-sender">Shareek</p>
                        <p class="message-text">${text}</p>
                        ${cardHtml}
                    </div>
                </div>
            `;
            messagesContainer.insertAdjacentHTML('beforeend', messageHtml);
            scrollToBottom();
        }

        // Scroll chat to bottom
        function scrollToBottom() {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Escape HTML to prevent XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Generate contextual response based on user input
        function generateResponse(input) {
            const text = input.toLowerCase();
            
            // Handle ongoing goal creation flow
            if (conversationState.mode === 'creating_goal') {
                return handleGoalCreationFlow(input, text);
            }
            
            // Handle ongoing contribution logging flow
            if (conversationState.mode === 'logging_contribution') {
                return handleContributionFlow(input, text);
            }
            
            // Goal-related queries
            if (text.includes('goal') && (text.includes('progress') || text.includes('how') || text.includes('advance') || text.includes('complete'))) {
                return {
                    text: `Your <strong>AI product leader</strong> goal is at 88% â€” you're very close! You need one more stakeholder recognition to complete it. The <strong>AI Summit on Thursday</strong> would be a perfect opportunity to present your framework and earn that recognition.`,
                    card: {
                        title: 'Government AI Summit 2026',
                        badge: 'Recommended',
                        body: 'Thursday, Jan 30 Â· Ministry of Cabinet Affairs Â· Presenting would complete your goal.',
                        actions: [
                            { label: 'Register to present', primary: true },
                            { label: 'View goal details', onclick: "openDetail('goal')" }
                        ]
                    }
                };
            }

            if (text.includes('set') && text.includes('goal') || text.includes('new goal') || text.includes('add goal') || text.includes('add a') && text.includes('goal') || text.includes('create goal')) {
                // Start goal creation flow
                conversationState.mode = 'creating_goal';
                conversationState.goalDraft = { objective: '', keyResults: [], skills: [], step: 'objective' };
                
                return {
                    text: `Let's create a new goal together. I'll help you structure it with clear objectives and measurable key results.<br><br><strong>What do you want to achieve?</strong><br><br>Describe your goal in a sentence. For example:<br>â€¢ "Become a recognized cross-government policy leader"<br>â€¢ "Develop executive communication skills"<br>â€¢ "Drive digital transformation in my department"`,
                    card: {
                        title: 'Suggested goals based on your profile',
                        badge: 'AI suggested',
                        body: 'These align with your current work patterns and skill gaps',
                        actions: [
                            { label: 'Cross-AI leadership in government', primary: true, onclick: "sendMessage('Become a recognized leader in cross-government coordination')" },
                            { label: 'Executive communication', onclick: "sendMessage('Strengthen my executive communication skills')" }
                        ]
                    }
                };
            }

            // Update goal progress
            if (text.includes('update') && text.includes('goal') || text.includes('goal progress')) {
                return {
                    text: `Here's your current goal progress. Which goal would you like to update?`,
                    card: {
                        title: "GovAI's AI Assistant Launch",
                        badge: '88%',
                        body: 'Need 1 more pilot entity to complete. Did you make progress on this?',
                        actions: [
                            { label: 'Mark key result complete', primary: true, onclick: "sendMessage('We completed the pilot with Ministry of Education')" },
                            { label: 'View all goals', onclick: "openFullView('goals')" }
                        ]
                    }
                };
            }

            // Log contribution
            if (text.includes('log') && text.includes('contribution') || text.includes('add contribution') || text.includes('record') && text.includes('work')) {
                conversationState.mode = 'logging_contribution';
                conversationState.contributionDraft = { description: '', skills: [], goals: [], category: '', step: 'description' };
                return {
                    text: `I can help you log a contribution. <strong>What did you work on?</strong><br><br>Describe what you did and I'll identify the skills demonstrated and link it to your goals.<br><br>For example:<br>â€¢ "I led a cross-entity workshop on procurement reform"<br>â€¢ "I presented the Q4 analysis to the Deputy Minister"<br>â€¢ "I mentored a junior analyst on policy frameworks"`,
                    card: {
                        title: 'Contribution types',
                        badge: 'Examples',
                        body: 'Leadership Â· Presentations Â· Analysis Â· Policy work Â· Mentoring Â· Projects',
                        actions: [
                            { label: 'Led a workshop', onclick: "sendMessage('I led a cross-entity coordination workshop')" },
                            { label: 'Gave a presentation', onclick: "sendMessage('I presented to senior leadership')" }
                        ]
                    }
                };
            }

            // Skill-related queries
            if (text.includes('skill') && (text.includes('develop') || text.includes('improve') || text.includes('grow') || text.includes('advance'))) {
                return {
                    text: `Looking at your skill profile, <strong>AI Product Strategy</strong> is your fastest-growing skill â€” you're on track for Advanced level this quarter. To accelerate, I'd suggest leading a high-stakes negotiation or presenting at the AI Summit.<br><br>I also notice a gap in <strong>Executive Communication</strong>. More senior-level presentations would help close this gap.`,
                    card: {
                        title: 'AI Product Strategy',
                        badge: 'â†‘ Accelerating',
                        body: 'Current: Consistent Â· 12 evidence signals Â· One high-stakes forum away from Advanced',
                        actions: [
                            { label: 'View skill details', primary: true, onclick: "openDetail('skill')" },
                            { label: 'See all skills', onclick: "openFullView('skills')" }
                        ]
                    }
                };
            }

            if (text.includes('skill') && text.includes('gap') || text.includes('weak') || text.includes('improve')) {
                return {
                    text: `Based on your contributions, I've identified one skill gap: <strong>Executive Communication</strong>. Your policy work is strong, but you have limited evidence of presenting to senior leadership.<br><br>The AI Summit would be a good opportunity to address this â€” presenting your framework would strengthen both this skill and advance your cross-entity goal.`,
                    card: null
                };
            }

            // Opportunity-related queries
            if (text.includes('opportunity') || text.includes('opportunities') || text.includes('rotation') || text.includes('job')) {
                return {
                    text: `I found <strong>4 high-match opportunities</strong> for you. The best match is the <strong>AI Strategy Lead - Ministry of Digital</strong> rotation at Ministry of Digital Government â€” it's a 100% skill match and aligns perfectly with your goals.`,
                    card: {
                        title: 'AI Strategy Lead - Ministry of Digital',
                        badge: '100% match',
                        body: 'Ministry of Digital Government Â· 6-month rotation Â· Aligns with your cross-entity goal',
                        actions: [
                            { label: 'Express interest', primary: true },
                            { label: 'See all opportunities', onclick: "openFullView('opportunities')" }
                        ]
                    }
                };
            }

            if (text.includes('compare') || text.includes('which') && text.includes('better')) {
                return {
                    text: `Let me compare your top opportunities:<br><br><strong>AI Strategy Lead - Ministry of Digital (100% match)</strong><br>â€¢ 6-month rotation at Ministry of Digital Government<br>â€¢ Directly advances your cross-entity goal<br>â€¢ Uses your strongest skills<br><br><strong>AI Summit Presenter (95% match)</strong><br>â€¢ One-time event on Jan 30<br>â€¢ Would complete your current goal<br>â€¢ Addresses Executive Communication gap<br><br>I'd recommend <strong>both</strong> â€” present at the Summit first (it's sooner), then apply for the rotation.`,
                    card: null
                };
            }

            // Focus/priority queries
            if (text.includes('focus') || text.includes('priorit') || text.includes('this week') || text.includes('should i')) {
                return {
                    text: `Based on your goals and upcoming opportunities, here's what I'd prioritize this week:<br><br><strong>1. Register for the AI Summit</strong> (deadline approaching)<br>This would complete your cross-entity goal and strengthen Executive Communication.<br><br><strong>2. Review the Ministry of Digital Government rotation</strong><br>It's a 100% match â€” worth expressing interest before it closes.<br><br><strong>3. Continue your cross-entity coordination work</strong><br>Your AI Product Strategy skill is accelerating â€” keep the momentum.`,
                    card: {
                        title: 'This week\'s priorities',
                        badge: '3 actions',
                        body: 'AI Summit registration Â· Review rotation opportunity Â· Continue coordination work',
                        actions: [
                            { label: 'Show my goals', primary: true, onclick: "openFullView('goals')" }
                        ]
                    }
                };
            }

            // Career trajectory / promotion readiness queries
            if (text.includes('trajectory') || text.includes('director') || text.includes('promotion') || text.includes('career path') || text.includes('ready for') || text.includes('become a') || (text.includes('advance') && text.includes('career')) || text.includes('leadership role') || text.includes('next level')) {
                return generateCareerTrajectoryResponse(text);
            }

            // Contribution-related
            if (text.includes('contribution') || text.includes('work') && text.includes('recent') || text.includes('what have i')) {
                return {
                    text: `This month you've logged <strong>5 contributions</strong>, inferring skills in AI Product Strategy, Stakeholder Management, and AI/ML Product Development.<br><br>Your most impactful recent work was the <strong>cross-entity alignment workshop</strong> on Jan 23 â€” it advanced your goal and strengthened multiple skills.`,
                    card: null
                };
            }

            // Summit/conference specific
            if (text.includes('summit') || text.includes('conference') || text.includes('present')) {
                return {
                    text: `The <strong>Government AI Summit 2026</strong> is on Thursday, Jan 30. Based on your profile, this is a 95% match. Presenting there would:<br><br>â€¢ Complete your AI product leader goal (need 1 more recognition)<br>â€¢ Strengthen your Executive Communication skill (current gap)<br>â€¢ Connect you with senior stakeholders across government<br><br>Would you like me to help prepare talking points for your presentation?`,
                    card: {
                        title: 'Government AI Summit 2026',
                        badge: '95% match',
                        body: 'Jan 30 Â· Ministry of Cabinet Affairs Â· Registration closing soon',
                        actions: [
                            { label: 'Register to present', primary: true },
                            { label: 'Help me prepare', onclick: "sendMessage('Help me prepare for the summit')" }
                        ]
                    }
                };
            }

            // Help/general queries
            if (text.includes('help') || text.includes('what can you') || text.includes('how do you')) {
                return {
                    text: `I'm Shareek, your AI work companion. I can help you with:<br><br>â€¢ <strong>Goals</strong> â€” Track progress, get recommendations, set new goals<br>â€¢ <strong>Skills</strong> â€” See your profile, identify gaps, find growth actions<br>â€¢ <strong>Opportunities</strong> â€” Find matched rotations, projects, conferences<br>â€¢ <strong>Priorities</strong> â€” Know what to focus on this week<br><br>Try asking me something like "How can I advance my goals?" or "What opportunities match my skills?"`,
                    card: null
                };
            }

            // Greeting
            if (text.includes('hello') || text.includes('hi') || text === 'hey' || text.includes('good morning')) {
                return {
                    text: `Hello Alexandra! How can I help you today? I can assist with your goals, skills development, or finding opportunities.`,
                    card: null
                };
            }

            // Thank you
            if (text.includes('thank')) {
                return {
                    text: `You're welcome! Let me know if there's anything else I can help with.`,
                    card: null
                };
            }

            // Default response
            return {
                text: `I understand you're asking about "${input}". Let me help with that.<br><br>I can provide insights about your <strong>goals</strong>, <strong>skills</strong>, or <strong>opportunities</strong>. Could you tell me more about what you'd like to know?<br><br>For example, try asking:<br>â€¢ "How can I advance my goals?"<br>â€¢ "What skills should I develop?"<br>â€¢ "Show me matching opportunities"`,
                card: null
            };
        }

        // Handle goal creation flow
        function handleGoalCreationFlow(input, text) {
            const draft = conversationState.goalDraft;
            
            // Cancel flow
            if (text.includes('cancel') || text.includes('nevermind') || text.includes('stop')) {
                resetState();
                return {
                    text: `No problem, I've cancelled the goal creation. Let me know if you'd like to try again later.`,
                    card: null
                };
            }
            
            // Step 1: Capture objective
            if (draft.step === 'objective') {
                draft.objective = input;
                draft.step = 'key_results';
                
                // Generate suggested key results based on the objective
                let suggestedKRs = [];
                if (text.includes('leader') || text.includes('cross-government') || text.includes('coordination')) {
                    suggestedKRs = [
                        'Lead 3+ cross-entity initiatives or projects',
                        'Earn recognition from stakeholders in 3+ entities',
                        'Have a framework or approach adopted government-wide'
                    ];
                    draft.skills = ['AI Product Strategy', 'Stakeholder Management'];
                } else if (text.includes('executive') || text.includes('communication') || text.includes('presentation')) {
                    suggestedKRs = [
                        'Present to senior leadership at least 3 times',
                        'Receive positive feedback on 2+ executive presentations',
                        'Lead a high-visibility briefing or workshop'
                    ];
                    draft.skills = ['Executive Communication', 'Facilitation'];
                } else if (text.includes('digital') || text.includes('transformation') || text.includes('innovation')) {
                    suggestedKRs = [
                        'Launch 2+ digital initiatives in my department',
                        'Achieve measurable efficiency improvements of 20%+',
                        'Train or upskill 5+ team members on digital tools'
                    ];
                    draft.skills = ['Digital Transformation', 'Strategic Planning'];
                } else {
                    suggestedKRs = [
                        'Complete 3 key milestones',
                        'Demonstrate measurable impact',
                        'Gain recognition from stakeholders'
                    ];
                    draft.skills = ['Strategic Planning'];
                }
                
                draft.suggestedKRs = suggestedKRs;
                
                return {
                    text: `Great objective: <strong>"${input}"</strong><br><br>Now let's define <strong>key results</strong> â€” these are measurable outcomes that show you've achieved your goal.<br><br>I've suggested some based on your objective. You can use these, modify them, or write your own.<br><br>Type your key results (one per message), or say <strong>"use suggestions"</strong> to accept mine. Say <strong>"done"</strong> when finished.`,
                    card: {
                        title: 'Suggested Key Results',
                        badge: `${suggestedKRs.length} suggestions`,
                        body: suggestedKRs.map((kr, i) => `${i + 1}. ${kr}`).join('<br>'),
                        actions: [
                            { label: 'Use these suggestions', primary: true, onclick: "sendMessage('use suggestions')" },
                            { label: 'Write my own', onclick: "" }
                        ]
                    }
                };
            }
            
            // Step 2: Capture key results
            if (draft.step === 'key_results') {
                // Accept suggestions
                if (text.includes('use suggestion') || text.includes('accept') || text.includes('use these')) {
                    draft.keyResults = draft.suggestedKRs || [];
                    draft.step = 'confirm';
                    
                    return generateGoalConfirmation(draft);
                }
                
                // Done adding key results
                if (text === 'done' || text.includes('that\'s all') || text.includes('finish')) {
                    if (draft.keyResults.length === 0) {
                        return {
                            text: `You haven't added any key results yet. Please add at least one measurable outcome, or say <strong>"use suggestions"</strong> to accept my recommendations.`,
                            card: null
                        };
                    }
                    draft.step = 'confirm';
                    return generateGoalConfirmation(draft);
                }
                
                // Add custom key result
                draft.keyResults.push(input);
                
                return {
                    text: `Added: <strong>"${input}"</strong><br><br>Key results so far (${draft.keyResults.length}):<br>${draft.keyResults.map((kr, i) => `${i + 1}. ${kr}`).join('<br>')}<br><br>Add another key result, or say <strong>"done"</strong> when finished.`,
                    card: null
                };
            }
            
            // Step 3: Confirmation
            if (draft.step === 'confirm') {
                if (text.includes('yes') || text.includes('confirm') || text.includes('create') || text.includes('save') || text.includes('looks good')) {
                    // Save the goal (in a real app, this would persist)
                    const newGoal = {
                        objective: draft.objective,
                        keyResults: draft.keyResults,
                        skills: draft.skills,
                        progress: 0,
                        createdAt: new Date().toLocaleDateString('en-US', { month: 'short', year: 'numeric' })
                    };
                    
                    // Add to goals list (simulated)
                    addGoalToView(newGoal);
                    
                    resetState();
                    
                    return {
                        text: `Your goal has been created! ðŸŽ¯<br><br><strong>${newGoal.objective}</strong><br><br>I'll track your progress based on your contributions and notify you of relevant opportunities. You can view and update this goal anytime in your Goals section.`,
                        card: {
                            title: newGoal.objective,
                            badge: 'New goal',
                            body: `${newGoal.keyResults.length} key results Â· Skills: ${newGoal.skills.join(', ')}`,
                            actions: [
                                { label: 'View all goals', primary: true, onclick: "openFullView('goals')" },
                                { label: 'Find related opportunities', onclick: "sendMessage('Find opportunities for my new goal')" }
                            ]
                        }
                    };
                }
                
                if (text.includes('no') || text.includes('edit') || text.includes('change')) {
                    draft.step = 'objective';
                    draft.keyResults = [];
                    
                    return {
                        text: `No problem, let's start over. What would you like your goal to be?`,
                        card: null
                    };
                }
                
                return {
                    text: `Please confirm: say <strong>"yes"</strong> to create this goal, or <strong>"edit"</strong> to make changes.`,
                    card: null
                };
            }
            
            return { text: `I didn't understand that. Please try again or say "cancel" to exit.`, card: null };
        }
        
        // Generate goal confirmation message
        function generateGoalConfirmation(draft) {
            return {
                text: `Here's your goal summary:<br><br><strong>Objective:</strong> ${draft.objective}<br><br><strong>Key Results:</strong><br>${draft.keyResults.map((kr, i) => `${i + 1}. ${kr}`).join('<br>')}<br><br><strong>Related Skills:</strong> ${draft.skills.join(', ')}<br><br>Does this look right? Say <strong>"yes"</strong> to create this goal, or <strong>"edit"</strong> to make changes.`,
                card: {
                    title: draft.objective,
                    badge: 'Draft',
                    body: `${draft.keyResults.length} key results`,
                    actions: [
                        { label: 'Create goal', primary: true, onclick: "sendMessage('yes, create it')" },
                        { label: 'Edit', onclick: "sendMessage('edit')" }
                    ]
                }
            };
        }
        
        // Add goal to the goals view (simulated)
        function addGoalToView(goal) {
            const goalsContainer = document.querySelector('#goals-view .full-view-content');
            const newGoalHtml = `
                <div class="goal-card-full" style="border-color: var(--accent-green); animation: goalAdded 0.5s ease;">
                    <div class="goal-card-header">
                        <div>
                            <h3 class="goal-card-title">${goal.objective}</h3>
                            <p class="goal-card-status">Created ${goal.createdAt} Â· Just started</p>
                        </div>
                        <span class="goal-card-badge" style="background: rgba(16, 185, 129, 0.15); color: var(--accent-green);">New</span>
                    </div>
                    <div class="goal-progress-bar">
                        <div class="goal-progress-fill green" style="width: 0%"></div>
                    </div>
                    <div class="goal-key-results">
                        ${goal.keyResults.map(kr => `
                            <div class="key-result">
                                <span class="key-result-status in-progress"></span>
                                <span class="key-result-text">${kr}</span>
                                <span class="key-result-value">0%</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Insert after the Ask Shareek section
            const askShareek = goalsContainer.querySelector('.ask-shareek');
            if (askShareek) {
                askShareek.insertAdjacentHTML('afterend', newGoalHtml);
            }
        }
        
        // Handle contribution logging flow
        function handleContributionFlow(input, text) {
            if (!conversationState.contributionDraft) {
                conversationState.contributionDraft = { description: '', skills: [], goals: [], category: '', step: 'description' };
            }
            
            const draft = conversationState.contributionDraft;
            
            if (text.includes('cancel') || text.includes('nevermind')) {
                resetState();
                return { text: `Contribution logging cancelled. Let me know if you'd like to try again.`, card: null };
            }
            
            // Step 1: Capture contribution description
            if (draft.step === 'description') {
                draft.description = input;
                
                // Auto-detect skills and category
                let detectedSkills = [];
                let detectedCategory = 'General';
                let detectedGoals = [];
                
                if (text.includes('workshop') || text.includes('led') || text.includes('facilitat') || text.includes('coordinat')) {
                    detectedSkills.push('Facilitation', 'Stakeholder Management');
                    detectedCategory = 'Leadership & Coordination';
                    detectedGoals.push("Launch GovAI's flagship AI assistant");
                }
                if (text.includes('present') || text.includes('briefing') || text.includes('executive') || text.includes('spoke')) {
                    detectedSkills.push('Executive Communication');
                    detectedCategory = 'Presentations & Communication';
                    detectedGoals.push("Launch GovAI's flagship AI assistant");
                }
                if (text.includes('policy') || text.includes('framework') || text.includes('strategy') || text.includes('drafted')) {
                    detectedSkills.push('AI/ML Product Development', 'Strategic Planning');
                    detectedCategory = 'Policy & Strategy';
                    detectedGoals.push('Scale AI adoption across government');
                }
                if (text.includes('cross') && (text.includes('entity') || text.includes('government') || text.includes('department'))) {
                    detectedSkills.push('AI Product Strategy');
                    detectedGoals.push("Launch GovAI's flagship AI assistant", 'Scale AI adoption across government');
                }
                if (text.includes('mentor') || text.includes('coach') || text.includes('train') || text.includes('taught')) {
                    detectedSkills.push('Mentoring', 'Knowledge Transfer');
                    detectedCategory = 'Leadership & Coordination';
                    detectedGoals.push('Build the AI product management practice at GovAI');
                }
                if (text.includes('analy') || text.includes('data') || text.includes('research') || text.includes('report')) {
                    detectedSkills.push('Data Analysis');
                    detectedCategory = 'Analysis & Research';
                }
                if (text.includes('digital') || text.includes('automat') || text.includes('system') || text.includes('tool')) {
                    detectedSkills.push('Digital Transformation');
                    detectedGoals.push('Build the AI product management practice at GovAI');
                }
                
                // Remove duplicates
                detectedSkills = [...new Set(detectedSkills)];
                detectedGoals = [...new Set(detectedGoals)];
                
                if (detectedSkills.length === 0) {
                    detectedSkills.push('Professional Development');
                }
                
                draft.skills = detectedSkills;
                draft.category = detectedCategory;
                draft.goals = detectedGoals;
                draft.step = 'review_skills';
                
                return {
                    text: `I've analyzed your contribution and identified:<br><br><strong>Skills demonstrated:</strong><br>${detectedSkills.map(s => `â€¢ ${s}`).join('<br>')}<br><br>Do these look right? You can say <strong>"yes"</strong> to confirm, or tell me which skills to add or remove.`,
                    card: {
                        title: 'Detected skills',
                        badge: `${detectedSkills.length} found`,
                        body: detectedSkills.join(' Â· '),
                        actions: [
                            { label: 'Looks good', primary: true, onclick: "sendMessage('yes, these are correct')" },
                            { label: 'Add more skills', onclick: "sendMessage('add skill')" }
                        ]
                    }
                };
            }
            
            // Step 2: Review and adjust skills
            if (draft.step === 'review_skills') {
                if (text.includes('yes') || text.includes('correct') || text.includes('looks good') || text.includes('confirm')) {
                    draft.step = 'link_goals';
                    
                    if (draft.goals.length > 0) {
                        return {
                            text: `This contribution could advance these goals:<br><br>${draft.goals.map((g, i) => `<strong>${i + 1}. ${g}</strong>`).join('<br>')}<br><br>Should I link this contribution to these goals? Say <strong>"yes"</strong> to confirm all, or specify which ones (e.g., "just the first one").`,
                            card: {
                                title: 'Goal connections',
                                badge: `${draft.goals.length} matches`,
                                body: 'Linking contributions to goals helps track your progress automatically',
                                actions: [
                                    { label: 'Link to all', primary: true, onclick: "sendMessage('yes, link to all')" },
                                    { label: 'Skip goal linking', onclick: "sendMessage('skip goals')" }
                                ]
                            }
                        };
                    } else {
                        draft.step = 'confirm';
                        return generateContributionConfirmation(draft);
                    }
                }
                
                // Add skill
                if (text.includes('add')) {
                    return {
                        text: `What skill would you like to add? You can type the skill name, for example:<br>â€¢ Strategic Planning<br>â€¢ Data Analysis<br>â€¢ Project Management<br>â€¢ Communication`,
                        card: null
                    };
                }
                
                // Check if they're adding a skill name
                const skillKeywords = ['strategic', 'planning', 'communication', 'leadership', 'analysis', 'management', 'collaboration', 'facilitation', 'development', 'transformation'];
                const hasSkillKeyword = skillKeywords.some(k => text.includes(k));
                
                if (hasSkillKeyword || text.length < 50) {
                    // Capitalize the skill
                    const newSkill = input.split(' ').map(w => w.charAt(0).toUpperCase() + w.slice(1)).join(' ');
                    if (!draft.skills.includes(newSkill)) {
                        draft.skills.push(newSkill);
                    }
                    return {
                        text: `Added <strong>${newSkill}</strong> to the skills list.<br><br><strong>Current skills:</strong> ${draft.skills.join(', ')}<br><br>Say <strong>"yes"</strong> when you're done, or add more skills.`,
                        card: null
                    };
                }
                
                return {
                    text: `I didn't quite catch that. Say <strong>"yes"</strong> to confirm the skills, or tell me what skill to add.`,
                    card: null
                };
            }
            
            // Step 3: Link to goals
            if (draft.step === 'link_goals') {
                if (text.includes('skip') || text.includes('no goal')) {
                    draft.goals = [];
                    draft.step = 'confirm';
                    return generateContributionConfirmation(draft);
                }
                
                if (text.includes('yes') || text.includes('all') || text.includes('link')) {
                    draft.step = 'confirm';
                    return generateContributionConfirmation(draft);
                }
                
                if (text.includes('first') || text.includes('1')) {
                    draft.goals = [draft.goals[0]];
                    draft.step = 'confirm';
                    return generateContributionConfirmation(draft);
                }
                
                if (text.includes('second') || text.includes('2')) {
                    draft.goals = draft.goals.length > 1 ? [draft.goals[1]] : draft.goals;
                    draft.step = 'confirm';
                    return generateContributionConfirmation(draft);
                }
                
                draft.step = 'confirm';
                return generateContributionConfirmation(draft);
            }
            
            // Step 4: Final confirmation
            if (draft.step === 'confirm') {
                if (text.includes('yes') || text.includes('save') || text.includes('log') || text.includes('confirm')) {
                    // Save the contribution
                    const contribution = {
                        description: draft.description,
                        skills: draft.skills,
                        goals: draft.goals,
                        category: draft.category,
                        date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })
                    };
                    
                    // Update skill counts (simulated)
                    updateSkillsFromContribution(contribution);
                    
                    // Update goal progress (simulated)
                    updateGoalProgress(contribution);
                    
                    const goalText = contribution.goals.length > 0 
                        ? `<br><br><strong>Goals advanced:</strong><br>${contribution.goals.map(g => `â€¢ ${g}`).join('<br>')}`
                        : '';
                    
                    resetState();
                    
                    return {
                        text: `Your contribution has been logged! ðŸ“<br><br><strong>"${contribution.description}"</strong><br><br><strong>Skills strengthened:</strong> ${contribution.skills.join(', ')}${goalText}<br><br>I've updated your skill profile and goal progress accordingly.`,
                        card: {
                            title: 'Contribution logged',
                            badge: contribution.date,
                            body: `${contribution.category} Â· ${contribution.skills.length} skills Â· ${contribution.goals.length} goals advanced`,
                            actions: [
                                { label: 'Log another', primary: true, onclick: "startContributionLogging()" },
                                { label: 'View skills', onclick: "openFullView('skills')" },
                                { label: 'View goals', onclick: "openFullView('goals')" }
                            ]
                        }
                    };
                }
                
                if (text.includes('edit') || text.includes('change') || text.includes('no')) {
                    draft.step = 'description';
                    return {
                        text: `No problem, let's start over. What did you work on?`,
                        card: null
                    };
                }
                
                return {
                    text: `Say <strong>"yes"</strong> to log this contribution, or <strong>"edit"</strong> to make changes.`,
                    card: null
                };
            }
            
            return { text: `I didn't understand that. Please try again or say "cancel" to exit.`, card: null };
        }
        
        // Generate contribution confirmation message
        function generateContributionConfirmation(draft) {
            const goalText = draft.goals.length > 0 
                ? `<br><br><strong>Linked goals:</strong><br>${draft.goals.map(g => `â€¢ ${g}`).join('<br>')}`
                : '<br><br><em>No goals linked</em>';
            
            return {
                text: `Here's your contribution summary:<br><br><strong>What you did:</strong> "${draft.description}"<br><br><strong>Category:</strong> ${draft.category}<br><br><strong>Skills demonstrated:</strong> ${draft.skills.join(', ')}${goalText}<br><br>Ready to log this? Say <strong>"yes"</strong> to confirm.`,
                card: {
                    title: draft.description.substring(0, 50) + (draft.description.length > 50 ? '...' : ''),
                    badge: 'Draft',
                    body: `${draft.skills.length} skills Â· ${draft.goals.length} goals`,
                    actions: [
                        { label: 'Log contribution', primary: true, onclick: "sendMessage('yes, log it')" },
                        { label: 'Edit', onclick: "sendMessage('edit')" }
                    ]
                }
            };
        }
        
        // Update skills from contribution (simulated)
        function updateSkillsFromContribution(contribution) {
            // In a real app, this would update the backend
            // Here we just show a toast notification
            const toast = document.getElementById('toast');
            toast.querySelector('.toast-title').textContent = 'Skills updated';
            toast.querySelector('.toast-text').textContent = `${contribution.skills.join(', ')} strengthened`;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 4000);
        }
        
        // Update goal progress from contribution (simulated)  
        function updateGoalProgress(contribution) {
            // In a real app, this would update goal progress in the backend
            if (contribution.goals.length > 0) {
                console.log('Goals advanced:', contribution.goals);
            }
        }

        // Generate career trajectory / promotion readiness response
        function generateCareerTrajectoryResponse(text) {
            const isDirectorQuery = text.includes('director');
            const isManagerQuery = text.includes('manager');
            const isLeadershipQuery = text.includes('leader') || text.includes('leadership');
            
            // Determine target role
            let targetRole = 'Director';
            if (isManagerQuery && !isDirectorQuery) targetRole = 'Senior Manager';
            if (isLeadershipQuery && !isDirectorQuery && !isManagerQuery) targetRole = 'Leadership';
            
            // Career readiness assessment data (would come from backend in real app)
            const assessment = {
                overallReadiness: 72,
                targetRole: targetRole,
                currentLevel: 'Senior Specialist',
                timeframe: '12-18 months',
                strengths: [
                    { skill: 'AI Product Strategy', level: 'Consistent', trend: 'Accelerating', icon: 'â†‘' },
                    { skill: 'Stakeholder Management', level: 'Advanced', trend: 'Stable', icon: 'â—' },
                    { skill: 'AI/ML Product Development', level: 'Consistent', trend: 'Growing', icon: 'â†‘' }
                ],
                gaps: [
                    { skill: 'Executive Communication', level: 'Emerging', required: 'Advanced', priority: 'High' },
                    { skill: 'Team Leadership', level: 'Limited evidence', required: 'Consistent', priority: 'Medium' },
                    { skill: 'Budget Management', level: 'No evidence', required: 'Foundational', priority: 'Medium' }
                ],
                experiences: [
                    { name: 'Cross-entity leadership', status: 'Strong', description: '4 cross-entity initiatives led' },
                    { name: 'Senior stakeholder exposure', status: 'Moderate', description: 'Limited executive presentations' },
                    { name: 'People management', status: 'Gap', description: 'No direct reports yet' },
                    { name: 'Strategic planning', status: 'Strong', description: 'Led 2 strategic initiatives' }
                ],
                recommendations: [
                    { 
                        title: 'Present at AI Summit', 
                        impact: 'High',
                        skills: ['Executive Communication'],
                        description: 'Senior visibility + addresses key gap'
                    },
                    { 
                        title: 'Apply for Ministry of Digital Government rotation', 
                        impact: 'High',
                        skills: ['Team Leadership', 'Budget Management'],
                        description: 'Would include team oversight responsibilities'
                    },
                    { 
                        title: 'Mentor junior team members', 
                        impact: 'Medium',
                        skills: ['Team Leadership'],
                        description: 'Build people management evidence'
                    },
                    { 
                        title: 'Lead a budget-involved project', 
                        impact: 'Medium',
                        skills: ['Budget Management'],
                        description: 'Gain financial oversight experience'
                    }
                ]
            };
            
            // Build the response text
            let responseText = `<div class="career-assessment">`;
            
            // Overall readiness header
            responseText += `<div class="assessment-header">
                <div class="readiness-score">
                    <div class="score-circle" style="--score: ${assessment.overallReadiness}">
                        <span class="score-value">${assessment.overallReadiness}%</span>
                    </div>
                    <div class="score-label">Readiness for ${assessment.targetRole}</div>
                </div>
                <div class="assessment-summary">
                    <p>Based on your skills, contributions, and career patterns, you're on a <strong>promising trajectory</strong> toward ${assessment.targetRole}.</p>
                    <p class="timeframe">Estimated timeframe: <strong>${assessment.timeframe}</strong> with focused development</p>
                </div>
            </div>`;
            
            // Strengths section
            responseText += `<div class="assessment-section">
                <div class="section-header strengths">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><path d="M22 4L12 14.01l-3-3"/></svg>
                    Your Strengths
                </div>
                <div class="strength-list">`;
            
            assessment.strengths.forEach(s => {
                responseText += `<div class="strength-item">
                    <span class="strength-name">${s.skill}</span>
                    <span class="strength-level">${s.level}</span>
                    <span class="strength-trend ${s.trend.toLowerCase()}">${s.icon} ${s.trend}</span>
                </div>`;
            });
            
            responseText += `</div></div>`;
            
            // Gaps section
            responseText += `<div class="assessment-section">
                <div class="section-header gaps">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>
                    Gaps to Address
                </div>
                <div class="gap-list">`;
            
            assessment.gaps.forEach(g => {
                responseText += `<div class="gap-item ${g.priority.toLowerCase()}">
                    <div class="gap-info">
                        <span class="gap-name">${g.skill}</span>
                        <span class="gap-current">${g.level} â†’ ${g.required} needed</span>
                    </div>
                    <span class="gap-priority">${g.priority} priority</span>
                </div>`;
            });
            
            responseText += `</div></div>`;
            
            // Experience readiness
            responseText += `<div class="assessment-section">
                <div class="section-header experience">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg>
                    Experience Readiness
                </div>
                <div class="experience-list">`;
            
            assessment.experiences.forEach(e => {
                const statusClass = e.status.toLowerCase().replace(' ', '-');
                responseText += `<div class="experience-item">
                    <span class="experience-status ${statusClass}"></span>
                    <div class="experience-info">
                        <span class="experience-name">${e.name}</span>
                        <span class="experience-desc">${e.description}</span>
                    </div>
                </div>`;
            });
            
            responseText += `</div></div>`;
            
            responseText += `</div>`;
            
            // Build recommendations card
            const card = {
                title: `Path to ${assessment.targetRole}`,
                badge: `${assessment.recommendations.length} actions`,
                body: `<div class="recommendation-list">
                    ${assessment.recommendations.map(r => `
                        <div class="recommendation-item" onclick="sendMessage('Tell me more about: ${r.title}')">
                            <div class="rec-header">
                                <span class="rec-title">${r.title}</span>
                                <span class="rec-impact ${r.impact.toLowerCase()}">${r.impact} impact</span>
                            </div>
                            <p class="rec-desc">${r.description}</p>
                            <div class="rec-skills">${r.skills.map(s => `<span class="rec-skill">${s}</span>`).join('')}</div>
                        </div>
                    `).join('')}
                </div>`,
                actions: [
                    { label: 'Create development goal', primary: true, onclick: "sendMessage('I want to create a goal to become a Director')" },
                    { label: 'View skill gaps', onclick: "openFullView('skills')" }
                ]
            };
            
            return {
                text: responseText,
                card: card
            };
        }

        // Send message and get response
        function sendMessage(text) {
            if (!text || !text.trim()) return;
            
            addUserMessage(text);
            showTyping();
            
            // Simulate AI thinking time
            const delay = 1000 + Math.random() * 1500;
            setTimeout(() => {
                const response = generateResponse(text);
                addAIResponse(response.text, response.card);
            }, delay);
        }

        // Chat input handler
        document.querySelector('.chat-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.target.value.trim()) {
                sendMessage(e.target.value.trim());
                e.target.value = '';
            }
        });

        // Chat send button handler
        document.querySelector('.chat-send').addEventListener('click', () => {
            const input = document.querySelector('.chat-input');
            if (input.value.trim()) {
                sendMessage(input.value.trim());
                input.value = '';
            }
        });

        // Command palette input handler
        document.querySelector('.cmd-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && e.target.value.trim()) {
                const text = e.target.value.trim();
                e.target.value = '';
                document.getElementById('cmd-overlay').classList.remove('active');
                sendMessage(text);
            }
        });
    </script>
</body>
</html>
